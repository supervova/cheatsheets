<!DOCTYPE html>
<html lang="ru" prefix="og: http://ogp.me/ns#"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JavaScript. Теория — углубленное изучение</title>
<meta name="description" content="Общие темы {%- include details.html title=&quot;Ключевое слово `this` и контекст (контекст выполнения)&quot; path=&quot;_advanced/common/context-and-this.md&quot; id=&quot;topic-context&quot; -%} {%- include details.html title=&quot;Явное указание `this`: методы `call()`, `apply()`&quot; path=&quot;_advanced/common/binding-call-and-apply.md&quot; id=&quot;topic-common-call-apply&quot; -%} {%- include details.html title=&quot;Привязка контекста к функции / методу - `bind`()&quot; path=&quot;_advanced/common/binding-bind.md&quot; id=&quot;topic-common-bind&quot; -%} Условия и циклы {%- include details.html title=&quot;`if...else`&quot; path=&quot;_advanced/control-structures/if-else.md&quot; id=&quot;topic-if-else&quot;...">
<meta name="author" content="Vladimir Nikishin, www.super-mark.ru">
<meta name="apple-mobile-web-app-title" content="Шпоры">
<meta name="theme-color" content="#e5effa"><link rel="canonical" href="https://cheatsheets.super-mark.ru/js/advanced-theory"><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Roboto:wght@400;500&display=swap">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlightjs-themes@1.0.0/mono-blue.css">
<link rel="stylesheet" href="/assets/css/style.css?20221013-0630">
</head>
<body>
    <main class="main">
  <h1>JavaScript. Теория — углубленное изучение</h1>
  <input class="input__field is-lg" id="topic-filter" type="text" placeholder="Фильтр записей: введите запрос">

  <section>
  <h2>Общие темы</h2><details class="accordion" id="topic-context">
  <summary class="accordion__header">
    Ключевое слово `this` и контекст (контекст выполнения)
  </summary>
  <div class="accordion__body">
      <p>Контекст выполнения (execution context) или просто контекст — это абстрактная концепция, описывающая обстоятельства вызова функции или метода и, главное, так называемое окружение: свои и наследуемые переменные, методы, свойства, окружение.</p>

      <h4 id="this"><code class="language-plaintext highlighter-rouge">this</code></h4>

      <p><code class="language-plaintext highlighter-rouge">this</code> — это ключевое слово, ссылка на определенный объект со всеми его свойствами и методами. Иными словами, <code class="language-plaintext highlighter-rouge">this</code> открывает доступ к контексту объекта.</p>

      <ul>
        <li><strong>В методе</strong> объекта <code class="language-plaintext highlighter-rouge">this</code> содержит ссылку на текущий объект.</li>
        <li><strong>В обработчиках событий</strong> <code class="language-plaintext highlighter-rouge">this</code> содержит ссылку на элемент-источник события. Если это, например, клик на кнопке — то на кнопке.</li>
        <li><strong>В функции</strong> в строгом режиме значение <code class="language-plaintext highlighter-rouge">this</code> не определено — <code class="language-plaintext highlighter-rouge">undefined</code>.</li>
        <li><strong>В функции</strong> в НЕстрогом режиме — на глобальный объект.</li>
        <li>За пределами фигурных скобок функций, циклов и условий — на глобальный объект.</li>
      </ul>

      <p>☝️🧐 Стрелочные функции не создают собственного значения <code class="language-plaintext highlighter-rouge">this</code> и берут его из внешней функции.</p>

      <p>☝️🧐 <code class="language-plaintext highlighter-rouge">this</code> это ключевое слово, а не переменная. Изменить его значение (ссылку) невозможно. Оно зависит только от контекста, в котором используется, и режима — строгого или нестрогого.</p>

      <p>☝️🧐 <a href="/js/advanced-theory.html#topic-common-call-apply">Методы <code class="language-plaintext highlighter-rouge">call</code> и <code class="language-plaintext highlighter-rouge">apply</code></a> позволяют передавать функциям ЛЮБОЙ контекст в ссылке <code class="language-plaintext highlighter-rouge">this</code>.</p>

      <h4 id="section">Контекст объекта</h4>

      <p>При обращении к свойству/методу объекта внутри объекта для ссылки на этот объект используется слово <code class="language-plaintext highlighter-rouge">this</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">id</span><span class="p">:</span> <span class="mi">5566</span><span class="p">,</span>
<span class="err">  </span><span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">fiat</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">make</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Fiat</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">model</span><span class="p">:</span> <span class="dl">'</span><span class="s1">500</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">year</span><span class="p">:</span> <span class="mi">1957</span><span class="p">,</span>
<span class="err">  </span><span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Medium Blue</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">passengers</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="err">  </span><span class="na">convertible</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="err">  </span><span class="na">mileage</span><span class="p">:</span> <span class="mi">88000</span><span class="p">,</span>
<span class="err">  </span><span class="na">started</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="err">  </span><span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">started</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="err">  </span><span class="p">},</span>
<span class="err">  </span><span class="nx">stop</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">started</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="err">  </span><span class="p">},</span>
<span class="err">  </span><span class="nx">drive</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">started</span><span class="p">)</span> <span class="p">{</span>
<span class="err">      </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Zoom zoom!</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">      </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">You need to start the engine first.</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="p">}</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-1">Контекст обработчиков событий</h4>

      <p>В обработчиках событий <code class="language-plaintext highlighter-rouge">this</code> ссылается на элемент-источник события. Если это, например, клик на кнопке — то на кнопку. Например</p>

      <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"this.style.display='none'"</span><span class="nt">&gt;</span>
  Click to Remove Me!
<span class="nt">&lt;/button&gt;</span>
</code></pre></div>      </div>

      <h4 id="section-2">Глобальный контекст</h4>

      <p>В глобальном контексте <code class="language-plaintext highlighter-rouge">this</code> ссылается на глобальный объект: в браузере — это <code class="language-plaintext highlighter-rouge">window</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">global alert</span><span class="dl">'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">global console</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">currentDocument</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">;</span>
</code></pre></div>      </div>

      <h4 id="section-3">Контекст функции</h4>

      <p>Если скрипт запускается в строгом режиме (директива <code class="language-plaintext highlighter-rouge">'use strict'</code>), то значение <code class="language-plaintext highlighter-rouge">this</code> — <code class="language-plaintext highlighter-rouge">undefined</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">myFuncStrict</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>В НЕстрогом режиме <code class="language-plaintext highlighter-rouge">this</code> функции содержал бы ссылку на глобальный объект window.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">myFuncNoStrict</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>☝️🧐 Рекомендации Airbnb: не сохранять ссылку на <code class="language-plaintext highlighter-rouge">this</code>, чтобы передать во вложенную функцию контекст. Использовать стрелочные функции, которые наследуют внешний контекст.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * ⛔️ плохо
 * @return {*}
 */</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
<span class="err">  </span><span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">self</span><span class="p">);</span>
<span class="err">  </span><span class="p">};</span>
<span class="p">}</span>

<span class="cm">/**
 * 👍  хорошо
 * @return {*}
 */</span>
<span class="kd">function</span> <span class="nx">bar</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="err">  </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-common-call-apply">
  <summary class="accordion__header">
    Явное указание `this`: методы `call()`, `apply()`
  </summary>
  <div class="accordion__body">
      <ul>
        <li><code class="language-plaintext highlighter-rouge">myFunc.call(useThisforThi, addionalParam1)</code> и</li>
        <li><code class="language-plaintext highlighter-rouge">myFunc.apply(
    useThisforThis, [</code>some<code class="language-plaintext highlighter-rouge">,</code>array<code class="language-plaintext highlighter-rouge">,</code>for<code class="language-plaintext highlighter-rouge">,</code>compute<code class="language-plaintext highlighter-rouge">]
  )</code>.</li>
      </ul>

      <p>По умолчанию, свойства и методы объектов JavaScript недоступны из других объектов. Например, <code class="language-plaintext highlighter-rouge">myObj</code> не может воспользоваться методами <code class="language-plaintext highlighter-rouge">someoneElseObj</code> и наоборот.</p>

      <p>Однако есть способ обойти это ограничение: методы <code class="language-plaintext highlighter-rouge">call()</code>, <code class="language-plaintext highlighter-rouge">apply()</code> и <a href="/js/advanced-theory.html#topic-common-bind">bind()</a> для привязки функции к любому объекту, как если бы она ему принадлежала.</p>

      <p>Если говорить «по-програмистски»:</p>

      <ul>
        <li>для вызова с заданным контекстом</li>
        <li>или с явным указанием <code class="language-plaintext highlighter-rouge">this</code>.</li>
      </ul>

      <p><strong>Различия</strong>. <code class="language-plaintext highlighter-rouge">call</code> и <code class="language-plaintext highlighter-rouge">apply</code> вызывают функцию немедленно, а <code class="language-plaintext highlighter-rouge">bind</code> возвращает функцию с правильным контекстом, которую можно вызвать с задержкой, в подходящий момент.</p>

      <h4 id="call">Метод <code class="language-plaintext highlighter-rouge">call()</code></h4>

      <p>С методом <code class="language-plaintext highlighter-rouge">call()</code> объект может использовать метод другого объекта.</p>

      <p><strong>Пример №1</strong>. В приведённом ниже коде мы вызываем sayHi в контексте различных объектов: sayHi.call(user) запускает sayHi, передавая this=user, а следующая строка устанавливает this=admin:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">admin</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Admin</span><span class="dl">'</span> <span class="p">};</span>

<span class="cm">/* используем 'call' для передачи различных объектов
в качестве `this` */</span>
<span class="nx">sayHi</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span> <span class="c1">// John</span>
<span class="nx">sayHi</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">admin</span><span class="p">);</span> <span class="c1">// Admin</span>
</code></pre></div>      </div>

      <p><strong>Пример №2</strong>. Вызываем метод объекта с дополнительными аргументами.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">fullName</span><span class="p">(</span><span class="nx">city</span><span class="p">,</span> <span class="nx">country</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="s2">`
      </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">,
      </span><span class="p">${</span><span class="nx">city</span><span class="p">}</span><span class="s2">,
      </span><span class="p">${</span><span class="nx">country</span><span class="p">}</span><span class="s2">
    `</span><span class="p">;</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">person1</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">person</span><span class="p">.</span><span class="nx">fullName</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">person1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Oslo</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Norway</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="apply">Метод apply()</h4>

      <p>Если нам неизвестно, с каким количеством аргументов понадобится вызвать функцию, можно использовать более мощный метод — <code class="language-plaintext highlighter-rouge">apply</code>. Дополнительные аргументы в отличие от <code class="language-plaintext highlighter-rouge">call</code> он принимает не списком, а массивом.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">maryDoe</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Mary</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>


<span class="cm">/* Вызов вернет 'Mary Doe, Oslo, Norway'.
2-й и 3-й аргументы сгруппированы в массив.
Но преимущество apply перед call отчётливо
видно, когда массив аргументов формируется
динамически. */</span>
<span class="nx">personWithDetails</span><span class="p">.</span><span class="nx">fullName</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span>
<span class="err">  </span><span class="nx">maryDoe</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Oslo</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Norway</span><span class="dl">'</span><span class="p">]</span>
<span class="p">);</span>
</code></pre></div>      </div>

      <p><strong>Пример №4</strong>. Массивы в JS не имеют методов, определяющих максимальное или минимальное значение. Но такие методы есть во встроенном объекте <code class="language-plaintext highlighter-rouge">Math</code>. С помощью метода <code class="language-plaintext highlighter-rouge">apply()</code> можно вызвать эти методы для массивов.</p>

      <p>Вызов метода <code class="language-plaintext highlighter-rouge">max()</code> нижe вернет 3.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* ☝️🧐 В качестве контекста методу apply()
передан null. А можно было передать и 0,
и пустую строку — `Math.max` все равно игнорирует
контекст, не использует this. Зачем this, если
нужно всего лишь выбрать максимальный
из аргументов? */</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
</code></pre></div>      </div>

      <h4 id="this-1">Преобразование значения <code class="language-plaintext highlighter-rouge">this</code></h4>

      <p>Одной из серьёзных проблем с безопасностью в обычном, нестрогом режиме является передача контекста глобальному объекту <code class="language-plaintext highlighter-rouge">window</code>. Например, при вызове метода <code class="language-plaintext highlighter-rouge">apply()</code> или <code class="language-plaintext highlighter-rouge">call()</code> c аргументом <code class="language-plaintext highlighter-rouge">null</code> или <code class="language-plaintext highlighter-rouge">undefined</code>.</p>

      <p>А в строгом режиме значение this функции равно null, и при доступе к методу объекта, функции выскочит ошибка.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">color</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">displayColor</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* В вызове в displayColor.call() передается
значение null. В обычном режиме значением this
функции станет глобальный объект window,
которому принадлежит переменная color,
и появится диалог со строкой green.

В строгом режиме так сделать не получится —
выскочит ошибка. */</span>
<span class="nx">displayColor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-common-bind">
  <summary class="accordion__header">
    Привязка контекста к функции / методу - `bind`()
  </summary>
  <div class="accordion__body">
      <h4 id="this-">Пропадающий в колбэке <code class="language-plaintext highlighter-rouge">this</code> метода</h4>

      <p>При передаче методов объекта в качестве колбэков, например для setTimeout, возникает известная проблема – потеря <code class="language-plaintext highlighter-rouge">this</code>.</p>

      <p>Существует несколько решений. Самый простой — обернуть вызов метода в анонимную функцию-обёртку, создав замыкание.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Вася</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`Привет, </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Со второй скобки начинается обёртка, она передана
в setTimeout в качестве первого аргумента */</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">user</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">();</span> <span class="c1">// Привет, Вася!</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Теперь код работает корректно, так как объект user достаётся из замыкания, а затем вызывается его метод <code class="language-plaintext highlighter-rouge">sayHi</code>.</p>

      <p>Но теперь в нашем коде появилась небольшая уязвимость. Что произойдёт, если до момента срабатывания <code class="language-plaintext highlighter-rouge">setTimeout</code> (ведь задержка составляет целую секунду!) в переменную <code class="language-plaintext highlighter-rouge">user</code> будет записано другое значение? Тогда вызов неожиданно будет совсем не тот!</p>

      <h4 id="bind">bind()</h4>

      <p>Проблему решает метод <code class="language-plaintext highlighter-rouge">bind()</code>. Принцип действия напоминает <a href="/js/advanced-theory.html#topic-common-call-apply"><code class="language-plaintext highlighter-rouge">call()</code> и <code class="language-plaintext highlighter-rouge">apply()</code></a>, но <strong>в отличие от них <code class="language-plaintext highlighter-rouge">bind()</code> создает и возвращает связанную функцию, выполнение которой можно отложить</strong>.</p>

      <p>С его помощью можно связать любую функцию/метод с определенным объектом. И, в частности, с родительским — чтобы контекст не терялся при вызове в колбэке.</p>

      <p>Пример привязки к обычной функции.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Вася</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">func</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">funcUser</span> <span class="o">=</span> <span class="nx">func</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<span class="nx">funcUser</span><span class="p">();</span> <span class="c1">// Вася</span>
</code></pre></div>      </div>

      <p>Здесь <code class="language-plaintext highlighter-rouge">funcUser</code> – это «связанный вариант» <code class="language-plaintext highlighter-rouge">func</code>, с фиксированным <code class="language-plaintext highlighter-rouge">this</code>=<code class="language-plaintext highlighter-rouge">user</code>.</p>

      <p>Пример с методом объекта:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Вася</span><span class="dl">"</span><span class="p">,</span>
<span class="err">  </span><span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`Привет, </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">sayHi</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span> <span class="c1">// 🙋🏻‍♀️</span>

<span class="nx">sayHi</span><span class="p">();</span> <span class="c1">// Привет, Вася!</span>

<span class="nx">setTimeout</span><span class="p">(</span><span class="nx">sayHi</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span> <span class="c1">// Привет, Вася!</span>
</code></pre></div>      </div>

      <p>В строке 🙋🏻‍♀️ мы берём метод <code class="language-plaintext highlighter-rouge">user.sayHi</code> и привязываем его к <code class="language-plaintext highlighter-rouge">user</code>. Теперь <code class="language-plaintext highlighter-rouge">sayHi</code> – это «связанная» функция, которая может быть вызвана отдельно или передана в <code class="language-plaintext highlighter-rouge">setTimeout</code> (контекст всегда будет правильным).</p>

      <p>Здесь мы можем увидеть, что связав метод мы можем передавать в него аргументы.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Вася</span><span class="dl">"</span><span class="p">,</span>
<span class="err">  </span><span class="nx">say</span><span class="p">(</span><span class="nx">phrase</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">phrase</span><span class="p">}</span><span class="s2">, </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">say</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">say</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>

<span class="cm">/* Привет, Вася (аргумент "Привет" передан
в функцию "say") */</span>
<span class="nx">say</span><span class="p">(</span><span class="dl">"</span><span class="s2">Привет</span><span class="dl">"</span><span class="p">);</span>

<span class="cm">/* Пока, Вася (аргумент "Пока" передан
в метод "say") */</span>
<span class="nx">say</span><span class="p">(</span><span class="dl">"</span><span class="s2">Пока</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="bindall">Удобный метод <code class="language-plaintext highlighter-rouge">bindAll</code></h4>

      <p>Если у объекта много методов и мы планируем их активно передавать, то можно привязать контекст для них всех в цикле:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">user</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">user</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">user</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">bind</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="section-4">Частично привязанные функции</h4>

      <p>В функции можно закрепить не только <code class="language-plaintext highlighter-rouge">this</code>, но и аргументы. Например.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">mul</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Фиксируем первый аргумент `mul` — в новой
функции `double` это будет два */</span>
<span class="kd">let</span> <span class="nx">double</span> <span class="o">=</span> <span class="nx">mul</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="nx">alert</span><span class="p">(</span> <span class="nx">double</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">);</span> <span class="c1">// = mul(2, 3) = 6</span>
<span class="nx">alert</span><span class="p">(</span> <span class="nx">double</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">);</span> <span class="c1">// = mul(2, 4) = 8</span>
<span class="nx">alert</span><span class="p">(</span> <span class="nx">double</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">);</span> <span class="c1">// = mul(2, 5) = 10</span>
</code></pre></div>      </div>

      <p>Это называется частичное применение – мы создаём новую функцию, фиксируя некоторые из существующих параметров. Применяется редко — в основном для создания слегка модифицированных «экземпляров» функций.</p>
    </div>
</details>
</section>

<section>
  <h2>Условия и циклы</h2><details class="accordion" id="topic-if-else">
  <summary class="accordion__header">
    `if...else`
  </summary>
  <div class="accordion__body">
      <h4 id="section-5">Использование функции в условном выражении</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Необходимые переменные</span>
<span class="kd">const</span> <span class="nx">myAge</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="dl">'</span><span class="s1">How old are you?</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">legalDrivingAge</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>

<span class="c1">// Функция, которая будет использована в условии</span>
<span class="kd">const</span> <span class="nx">canIDrive</span> <span class="o">=</span> <span class="p">(</span><span class="nx">age</span><span class="p">,</span> <span class="nx">legalAge</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">age</span> <span class="o">&gt;=</span> <span class="nx">legalAge</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Функция в условии</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">canIDrive</span><span class="p">(</span><span class="nx">myAge</span><span class="p">,</span> <span class="nx">legalDrivingAge</span><span class="p">))</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">You can legally drive!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="err">    </span><span class="dl">'</span><span class="s1">You</span><span class="se">\'</span><span class="s1">ll have to wait a few more years!</span><span class="dl">'</span>
<span class="err">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="section-6">Вложенные условные конструкции</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">result</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">yourName</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">gender</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// Вложенная конструкция</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">gender</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">male</span><span class="dl">'</span> <span class="o">||</span> <span class="nx">gender</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">female</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">result</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Thanks</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">result</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Please enter male or female.</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">result</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Tell us both your name and gender.</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="section-7">☝️🧐 Стилистические рекомендации</h4>

      <p>Если в блоке <code class="language-plaintext highlighter-rouge">if</code> выполняется оператор <code class="language-plaintext highlighter-rouge">return</code>, последующий блок <code class="language-plaintext highlighter-rouge">else</code> не нужен. <code class="language-plaintext highlighter-rouge">return</code> внутри блока <code class="language-plaintext highlighter-rouge">else if</code>, следующем за блоком <code class="language-plaintext highlighter-rouge">if</code>, который содержит <code class="language-plaintext highlighter-rouge">return</code>, может быть разделен на несколько блоков <code class="language-plaintext highlighter-rouge">if</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * ⛔️ плохо
 * @return {*}
 */</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="nx">y</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**
 * 👍 хорошо
 * @return {*}
 */</span>
<span class="kd">function</span> <span class="nx">bar</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="k">return</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>☝️🧐 Для логического типа используем сокращение — переменные равные <code class="language-plaintext highlighter-rouge">true</code> или <code class="language-plaintext highlighter-rouge">false</code> в сравнении не нуждаются. Для строк и чисел используем явное сравнение.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ⛔️ плохо</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isValid</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// 👍 хорошо</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isValid</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// ⛔️ плохо</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// 👍 хорошо</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">!==</span> <span class="dl">''</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// ⛔️ плохо</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// 👍 хорошо</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>В условных операторах, результат выражения переводится в булевый тип по следующим правилам.</p>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">Object</code> = true</li>
        <li><code class="language-plaintext highlighter-rouge">Undefined</code> = false</li>
        <li><code class="language-plaintext highlighter-rouge">Null</code> соответствует false</li>
        <li><code class="language-plaintext highlighter-rouge">Boolean</code> — по значению</li>
        <li>Строка соответствует false, если пустая ‘’, в остальных случаях true</li>
        <li>Число соответствует false, если +0, -0, or <code class="language-plaintext highlighter-rouge">NaN</code>, в остальных случаях true</li>
      </ul>

      <p>☝️🧐 Если управляющий оператор (<code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">while</code> и т.д.) слишком длинный, то каждое (сгруппированное) условие можно поместить на новую строку. Логический оператор должен располагаться в начале строки.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ⛔️ плохо</span>
<span class="k">if</span> <span class="p">((</span><span class="nx">foo</span> <span class="o">===</span> <span class="mi">123</span> <span class="o">||</span> <span class="nx">bar</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">abc</span><span class="dl">'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">doesItLookGoodWhenItBecomesThatLong</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">isThisReallyHappening</span><span class="p">())</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">thing1</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// 👍 хорошо</span>
<span class="k">if</span> <span class="p">(</span>
<span class="err">  </span><span class="p">(</span><span class="nx">foo</span> <span class="o">===</span> <span class="mi">123</span> <span class="o">||</span> <span class="nx">bar</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">abc</span><span class="dl">'</span><span class="p">)</span>
<span class="err">  </span><span class="o">&amp;&amp;</span> <span class="nx">doesItLookGoodWhenItBecomesThatLong</span><span class="p">()</span>
<span class="err">  </span><span class="o">&amp;&amp;</span> <span class="nx">isThisReallyHappening</span><span class="p">()</span>
<span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">thing1</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-switch">
  <summary class="accordion__header">
    `switch`
  </summary>
  <div class="accordion__body">
      <p>☝️🧐 <strong>Использовать фигурные скобки</strong> для <code class="language-plaintext highlighter-rouge">case</code> и <code class="language-plaintext highlighter-rouge">default</code>, если они содержат присвоение значений переменных или объявление класса (так называемые «лексические декларации»).</p>

      <p><strong>Не объявлять</strong> в switch функций. eslint: no-case-declarations, no-inner-declarations</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ⛔️ плохо</span>
<span class="k">switch</span> <span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
<span class="err">    </span><span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
<span class="err">    </span><span class="kd">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="k">default</span><span class="p">:</span>
<span class="err">    </span><span class="kd">class</span> <span class="nx">C</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// 👍 хорошо</span>
<span class="k">switch</span> <span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">1</span><span class="p">:</span> <span class="p">{</span>
<span class="err">    </span><span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">2</span><span class="p">:</span> <span class="p">{</span>
<span class="err">    </span><span class="kd">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
<span class="err">    </span><span class="nx">bar</span><span class="p">();</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="k">default</span><span class="p">:</span> <span class="p">{</span>
<span class="err">    </span><span class="kd">class</span> <span class="nx">C</span> <span class="p">{}</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="section-8">Примеры</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Маловато</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">В точку!</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">5</span><span class="p">:</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Перебор</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="k">default</span><span class="p">:</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Я таких значений не знаю</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Сначала получаем номер дня недели из объекта
Date. Затем присваиваем переменной переменной
значения зависимости от этого номера */</span>
<span class="k">switch</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getDay</span><span class="p">())</span> <span class="p">{</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">6</span><span class="p">:</span>
<span class="err">    </span><span class="nx">text</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Today is Saturday</span><span class="dl">'</span><span class="p">;</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
<span class="err">    </span><span class="nx">text</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Today is Sunday</span><span class="dl">'</span><span class="p">;</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="k">default</span><span class="p">:</span>
<span class="err">    </span><span class="nx">text</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Looking forward to the Weekend</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="case">Группировка <code class="language-plaintext highlighter-rouge">case</code></h4>

      <p>Несколько значений case можно группировать. В примере ниже case 3 и case 5 выполняют один и тот же код</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Верно!</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>

<span class="err">  </span><span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
<span class="err">  </span><span class="k">case</span> <span class="mi">5</span><span class="p">:</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Немного ошиблись, бывает.</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>

<span class="err">  </span><span class="k">default</span><span class="p">:</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Странный результат, очень странный</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-loop-for">
  <summary class="accordion__header">
    `for`
  </summary>
  <div class="accordion__body">
      <h4 id="for"><code class="language-plaintext highlighter-rouge">for</code></h4>

      <p><strong>Запись в круглых скобках состоит из трех частей</strong>. При этом все три части опциональны.</p>

      <pre><code class="language-txt">for (
  инициализация счетчика;
  проверка условия;
  увеличение/ уменьшение счетчика
)
</code></pre>

      <p><strong>Первая часть</strong> — это, как правило, инициализация переменной цикла / счетчика. Однако в ней могут быть инициализированы и другие переменные. Например…</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">text</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">cities</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">text</span> <span class="o">+=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">cities</span><span class="p">}</span><span class="s2"> &lt;br&gt;`</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p><strong>Вторая часть — проверка условия</strong>. Она выполняется при каждой итерации цикла. Если условие оказывается ложным, выполнение цикла прерывается. Если есть желание пропустить эту часть, в теле цикла нужно указать break.</p>

      <p><strong>Третья часть — увеличение / уменьшение счетчика</strong>. Оно происходит один раз за итерацию, после выполнения всех команд в ТЕЛЕ цикла. Изменение счетчика чаще всего производят инкрементом <code class="language-plaintext highlighter-rouge">i++</code>. Но можно и декрементом <code class="language-plaintext highlighter-rouge">i--</code>, изменением на указанную цифру <code class="language-plaintext highlighter-rouge">i += 15</code> и т. д.</p>

      <p><code class="language-plaintext highlighter-rouge">👍 хорошо
 &lt; короче/лучше, чем &lt;=</code></p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Сокращенный вариант цикла, только с условием,
без счетчика */</span>
<span class="k">for</span> <span class="p">(;</span><span class="nx">answer</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">forty-two</span><span class="dl">'</span><span class="p">;)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="section-9">Вложенные циклы</h4>

      <p>Обычно вложенные циклы применяются для перебора многомерных массивов.</p>

      <p>Например, когда нужно сложить аккуратно вещи в шкафчике из трех полок, внешним циклом мы перебираем полки: одну за другой. На каждой этапе запускаем вложенный цикл, в процессе которого перебираем и раскладываем вещи.</p>

      <p>Те же процессы происходят, когда собираем колоду карт: поочереди масть за мастью — добавляем в каждой группе все номиналы. Или когда собираем многоуровневое главное меню сайта.</p>

      <p>Никаких ограничений: <code class="language-plaintext highlighter-rouge">for</code> в <code class="language-plaintext highlighter-rouge">for</code>, <code class="language-plaintext highlighter-rouge">for</code> в <code class="language-plaintext highlighter-rouge">while</code>, наоборот, с любым уровнем вложенности.</p>

      <p><strong>Пример.</strong> Три раза подряд посчитать от 1 до 5.</p>

      <p>☝️🧐 <code class="language-plaintext highlighter-rouge">i</code> и <code class="language-plaintext highlighter-rouge">j</code> — стандартные названия переменных для циклов. Эта традиция идет от тех времен, когда объем программы был ограничен (а код пробивался на перфокартах) и у коротких имен были преимущества перед значащими названиями. Теперь это всего лишь традиция, но всего лишь исключение из правила о выборе осмысленных имен переменных.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>😎 <strong>Трюк</strong>. Заполнение массива нулями — с тем, чтобы потом суммировать их с числами, результатами вычислений. Сложение пустой позиций с числом дает в результате undefined.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Пять раз…</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="cm">/* …добавляем в созданный в начале документа
  массив по 0 — получаем массив из 5 нулей */</span>
<span class="err">  </span><span class="nx">myArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p><strong>Практический пример.</strong> Подсчет вероятности выпадения дубля на двух костях.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">isDouble</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">totalCombos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// Каждая из шести сторон одной кости…</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="cm">/* …Может составить пару с шестью сторонами
  другой: 6x6 */</span>
<span class="err">  </span><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="cm">/* Увеличиваем счетчик дублей, если значения
    сторон совпадают */</span>
<span class="err">    </span><span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">===</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
<span class="err">      </span><span class="nx">isDouble</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="err">    </span><span class="p">}</span>
<span class="err">    </span><span class="nx">totalCombos</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* Вероятность — количество дублей на общее
количество комбинаций */</span>
<span class="kd">const</span> <span class="nx">probability</span> <span class="o">=</span> <span class="nx">isDouble</span> <span class="o">/</span> <span class="nx">totalCombos</span><span class="p">;</span>
</code></pre></div>      </div>
    </div>
</details>
</section>

<section>
  <h2>Функции</h2><details class="accordion" id="topic-functions-return">
  <summary class="accordion__header">
    Оператор `return`
  </summary>
  <div class="accordion__body">
      <p>Завершает выполнение текущей функции и возвращает её значение.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">square</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
<span class="err">  </span><span class="cm">/* return может находиться в любом месте тела
  функции. Но после этой директивы код уже не будет
  выполняться. */</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">В консоли это не появится</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Значение demo будет равняться 9</span>
<span class="kd">const</span> <span class="nx">demo</span> <span class="o">=</span> <span class="nx">square</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Вызовов <code class="language-plaintext highlighter-rouge">return</code> может быть несколько.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">checkAge</span><span class="p">(</span><span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">age</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="nx">confirm</span><span class="p">(</span><span class="dl">'</span><span class="s1">А родители разрешили?</span><span class="dl">'</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="dl">'</span><span class="s1">Сколько вам лет?</span><span class="dl">'</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span> <span class="nx">checkAge</span><span class="p">(</span><span class="nx">age</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span> <span class="dl">'</span><span class="s1">Доступ получен</span><span class="dl">'</span> <span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span> <span class="dl">'</span><span class="s1">Доступ закрыт</span><span class="dl">'</span> <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="return---">Использование <code class="language-plaintext highlighter-rouge">return</code> для раннего выхода</h4>

      <p>Возможно использовать <code class="language-plaintext highlighter-rouge">return</code> и без значения. Это приведёт к немедленному выходу из функции. Это один из способов раннего выхода — полезен в тех случаях, когда в расчетах соблюдается условие, после которого дальнейшие вычисления не нужны.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">showMovie</span><span class="p">(</span><span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">checkAge</span><span class="p">(</span><span class="nx">age</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Вам показывается кино</span><span class="dl">'</span><span class="p">);</span>
<span class="err">  </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>☝️🧐  Надо помнить, что функция всегда возвращает значение, а если оно не указывается, как в случаях с ранним выходом, то возвращается <code class="language-plaintext highlighter-rouge">undefined</code>.</p>

      <p>☝️🧐 Поэтому, если в функции используется return для раннего выхода, лучше явно возвращать false. В таком случае, если функция будет использоваться в каком-то условии, не надо будет проверять на <code class="language-plaintext highlighter-rouge">undefined</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">getName</span><span class="p">()</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span><span class="cm">/*👍*/</span><span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">getName</span><span class="p">()</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span><span class="cm">/*👎*/</span><span class="p">}</span>
</code></pre></div>      </div>

      <p>Реже для раннего выхода используются ключевые слова <code class="language-plaintext highlighter-rouge">break</code> и <code class="language-plaintext highlighter-rouge">throw</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="k">try</span> <span class="p">{</span>
<span class="err">    </span><span class="c1">//get out of here</span>
<span class="err">    </span><span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">Tommy Vercetti</span><span class="dl">'</span><span class="p">)</span> <span class="k">throw</span> <span class="dl">'</span><span class="s1">exit</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="c1">// handle exception</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">getFirstName</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="na">getName</span> <span class="p">:</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">I get logged</span><span class="dl">"</span><span class="p">);</span>
<span class="err">    </span><span class="k">break</span> <span class="nx">getName</span> <span class="p">;</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">I don't get logged</span><span class="dl">"</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="return-">Функции без <code class="language-plaintext highlighter-rouge">return</code> вообще</h4>

      <p><strong>Использование <code class="language-plaintext highlighter-rouge">return</code> необязательно.</strong> Если функция не возвращает значение, а, например, просто назначает CSS-класс, можно не использовать <code class="language-plaintext highlighter-rouge">return</code>.</p>

      <p>☝️🧐  Хотя некоторые разработчики используют пустой <code class="language-plaintext highlighter-rouge">return</code> в конце функции (не для раннего выхода, а для явного завершения выполнения), <a href="https://eslint.org/docs/rules/no-useless-return">Airbnb не рекомендует этого делать</a>.</p>

    </div>
</details>
<details class="accordion" id="topic-functions-call">
  <summary class="accordion__header">
    Вызов (call) функции
  </summary>
  <div class="accordion__body">
      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myFunc</span><span class="p">(</span><span class="dl">'</span><span class="s1">аргумент в param1</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">аргумент в param2</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Функции можно вызывать в других конструкциях, например в условной…</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">myFunc</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// code…;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// code…;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>Также функции можно вызвать в других функциях.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Пример № 1</span>
<span class="kd">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">cube</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">square</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>

<span class="c1">// Пример № 2</span>
<span class="kd">const</span> <span class="nx">isMultipleOfThree</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
</code></pre></div>      </div>

      <p>Интересный пример использования оператора <code class="language-plaintext highlighter-rouge">!</code> — логического «НЕ». Число сначала передаётся в первую функцию <code class="language-plaintext highlighter-rouge">isMultipleOfThree</code>. То, что остаток деления на 3 не равен 0 обозначается ! перед использованной функцией</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">isNotMultipleOfThree</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="nx">isMultipleOfThree</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-functions-object">
  <summary class="accordion__header">
    Любая функция — это объект. И любая функция — это метод
  </summary>
  <div class="accordion__body">
      <p>Функция, как почти все в JS — это объект. И у этого объекта есть свойства и методы. Например, свойство <code class="language-plaintext highlighter-rouge">name</code> содержит имя, указанное при объявлении функции, либо переменную / метод, в которую она сохранена.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// myFunc.name == 'myFunc'</span>
<span class="kd">function</span> <span class="nx">myFunc</span><span class="p">()</span> <span class="p">{}</span>

<span class="c1">// mySecondFunc.name == "mySecondFunc"</span>
<span class="kd">const</span> <span class="nx">mySecondFunc</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{};</span>

<span class="cm">/* Метод toString возвращает код функции в виде
строки */</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myFunc</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</code></pre></div>      </div>

      <p>Кроме того, любая функция — это метод. Если она не определена, как метод в пользовательском объекте, значит, становится методом глобального объекта.</p>
    </div>
</details>
<details class="accordion" id="topic-functions-first-class">
  <summary class="accordion__header">
    Функции высшего порядка (или функции первого класса)
  </summary>
  <div class="accordion__body">
      <ul>
        <li>Могут быть присвоены переменным или сохранены в объекте.</li>
        <li>Могут передаваться в качестве аргументов другим функциям.</li>
        <li>Другие функции могут возвращать first-class function, как результат.</li>
      </ul>

      <p>В практическом смысле это означает систему вложений (includ’ов) для функций.</p>

      <p>В JS все функции — высшего порядка (первоклассные).</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Функция которая будет передана в аргументе
 * следующей функции - «инклуд»
 */</span>
<span class="kd">function</span> <span class="nx">hawaiianTranslator</span><span class="p">(</span><span class="nx">word</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">let</span> <span class="nx">translation</span><span class="p">;</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">word</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">translation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Aloha</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">word</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">Goodbye</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">translation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Aloha</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="k">return</span> <span class="nx">translation</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**
 * «Мастер-функция» которая получит в аргументе
 * «функцию-инклуд»
 *
 * @param {function} translator — функция, которая
 * переводит полученный аргумент.
 */</span>
<span class="kd">function</span> <span class="nx">sayIt</span><span class="p">(</span><span class="nx">translator</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="cm">/* «Функция-инклуд», переданная в аргументе
  translator, вызывается, и полученное значение
  сохраняется в переменной phrase. */</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">phrase</span> <span class="o">=</span> <span class="nx">translator</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">);</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">phrase</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Вызываем sayIt, передавая ей в аргументе
«функцию-инклуд» */</span>
<span class="nx">sayIt</span><span class="p">(</span><span class="nx">hawaiianTranslator</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-functions-local-variables">
  <summary class="accordion__header">
    Локальные переменные
  </summary>
  <div class="accordion__body">
      <p>Переменные, объявленные внутри функции, недоступны за пределами ее фигурных скобок (область видимости функции). Они создаются в момент вызова функции и очищаются после выполнения кода функции.</p>

      <p>☝️🧐 Функции и объекты созданные внутри других функций, также ограничены локальной областью видимости и недоступны извне.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// code here can NOT use carName</span>

<span class="kd">function</span> <span class="nx">myFunc</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">carName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Volvo</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="c1">// code here CAN use carName</span>
<span class="p">}</span>

<span class="c1">// code here can NOT use carName</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-functions-parameters-default-values">
  <summary class="accordion__header">
    Параметры по умолчанию
  </summary>
  <div class="accordion__body">
      <p>Если функция не дополучает аргументов, пропущенные значения становятся <code class="language-plaintext highlighter-rouge">undefined</code>. Иногда это не страшно, но иногда чревато ошибками. Решают проблему значения по умолчанию. Присваиваются через знак равенства.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myFunc</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Икс</span><span class="dl">'</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
</code></pre></div>      </div>

      <p>Параметры со значениями по умолчанию пишутся в конце, после обычных параметров — так чтобы функция возвращала <code class="language-plaintext highlighter-rouge">undefined</code> только в случае пропуска всех аргументов.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">sayMyHeight</span> <span class="o">=</span> <span class="p">(</span>
<span class="err">  </span><span class="nx">name</span><span class="p">,</span>
<span class="err">  </span><span class="nx">height</span> <span class="o">=</span> <span class="mi">186</span><span class="p">,</span>
<span class="err">  </span><span class="nx">weight</span> <span class="o">=</span> <span class="mi">96</span>
<span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`
    Hi! My name is </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">. My height
    is </span><span class="p">${</span><span class="nx">height</span><span class="p">}</span><span class="s2">cm and my weight is </span><span class="p">${</span><span class="nx">weight</span><span class="p">}</span><span class="s2">kg.
  `</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">sayMyHeight</span><span class="p">(</span><span class="dl">'</span><span class="s1">Vova</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Параметры по умолчанию могут быть любого типа: строками, числами, булевыми значениями, объектами…</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">findProducts</span><span class="p">(</span>
<span class="err">  </span><span class="nx">opts</span> <span class="o">=</span> <span class="p">{</span> <span class="na">minPrice</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">maxPrice</span><span class="p">:</span> <span class="mi">20</span> <span class="p">},</span>
<span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">opts</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// { minPrice: 10, maxPrice: 20 }</span>
<span class="nx">findProducts</span><span class="p">();</span>

<span class="cm">/* {}. Даже пустой объект в аргументе заменит
значение по умолчанию */</span>
<span class="nx">findProducts</span><span class="p">({});</span>
</code></pre></div>      </div>

      <p>…и выражениями.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">sayHi</span><span class="p">(</span>
<span class="err">  </span><span class="nx">who</span> <span class="o">=</span> <span class="nx">getCurrentUser</span><span class="p">().</span><span class="nx">toUpperCase</span><span class="p">()</span>
<span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`Привет, </span><span class="p">${</span><span class="nx">who</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Привет, Вася</span>
<span class="nx">sayHi</span><span class="p">();</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-functions-anonymous">
  <summary class="accordion__header">
    Анонимные функции
  </summary>
  <div class="accordion__body">
      <p>Анонимная функция (еще можно встретить название «лямбды») — функция без имени. Применяется обычно тогда, когда функция используется лишь однажды. Например, как в примерах ниже, функция-обработчик загрузки страницы. Добавляется в функциональном выражении после знака равенства или в параметрах другой функции.</p>

      <p>Разработчики Airbnb предлагают заменять анонимные функции «старого образца» <a href="https://github.com/leonidlebedev/javascript-airbnb#стрелочные-функции">функциями-стрелками</a>.</p>

      <h4 id="section-10">Пример. Замена именованной функции анонимной…</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">handler</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Yeah, that page loaded!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>

<span class="cm">/* Убрать имя переменной handler
Назначить свойству window.onload функциональное
выражение */</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Yeah, that page loaded!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Или так</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">load</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// code; event can be 'resize'  too</span>
<span class="p">},</span> <span class="kc">false</span><span class="p">);</span>

</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-functions-arrow">
  <summary class="accordion__header">
    Стрелочные функции
  </summary>
  <div class="accordion__body">
      <p>Синтаксис функции через «стрелку» <code class="language-plaintext highlighter-rouge">=&gt;</code>, без ключевого слова <code class="language-plaintext highlighter-rouge">function</code> и в простых, однострочных случаях без ключевого слова  <code class="language-plaintext highlighter-rouge">return</code>.</p>

      <p>Компактность функций-стрелок значительно облегчает чтение кода. Но главная особенность стрелочных функций в другом. <strong>У них нет своего <code class="language-plaintext highlighter-rouge">this</code>.</strong> Если происходит обращение к <code class="language-plaintext highlighter-rouge">this</code>, его значение берётся снаружи, из внешней функции.</p>

      <p>Функции-стрелки предназначены для небольшого кода (например, обратного вызова), который не имеет своего контекста, выполняясь в родительском.</p>

      <p>В примере внутри <code class="language-plaintext highlighter-rouge">forEach</code> использована стрелочная функция. И это значит, что <code class="language-plaintext highlighter-rouge">this.title</code> в ней будет иметь точно такое же значение, как в методе <code class="language-plaintext highlighter-rouge">showList</code> — <code class="language-plaintext highlighter-rouge">group.title</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">group</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Наш курс</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">students</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Вася</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Петя</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Даша</span><span class="dl">'</span><span class="p">],</span>

<span class="err">  </span><span class="nx">showList</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">students</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span>
<span class="err">      </span><span class="c1">// стрелочная функция, в которой this тот</span>
<span class="err">      </span><span class="c1">// же, что и у родительского метода</span>
<span class="err">      </span><span class="nx">student</span> <span class="o">=&gt;</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="s2">: student`</span><span class="p">),</span>
<span class="err">    </span><span class="p">);</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p>⚠️ <strong>Стрелочные функции не надо писать везде.</strong> Главным образом — там, где нужно сохранить контекст родителя: обработчиках событий, ajax-запросах, анимации (<code class="language-plaintext highlighter-rouge">setInterval</code>, <code class="language-plaintext highlighter-rouge">setTimeout</code>). То есть, <strong>когда функция передается, как аргумент в другую функцию или встроенный метод</strong>.</p>

      <p>⛔️ Стрелочные функции не могут быть использованы как конструкторы, с <code class="language-plaintext highlighter-rouge">new</code> — потому что у них нет <code class="language-plaintext highlighter-rouge">this</code>. У функций-стрелок нет свойства <code class="language-plaintext highlighter-rouge">prototype</code>.</p>

      <h4 id="section-11">Простейший вариант стрелочной функции</h4>

      <p>Слева от <code class="language-plaintext highlighter-rouge">=&gt;</code> находится параметр (<code class="language-plaintext highlighter-rouge">x</code> в данном случае), а справа – выражение, которое нужно вернуть. Без слова <code class="language-plaintext highlighter-rouge">return</code> — в кратком синтаксисе стрелочных функций результат возвращается без лишних формальностей.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myFunc</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Сейчас функция myFunc вернет 2</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">myFunc</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>

<span class="c1">// Та же функция в традиционном синтаксисе:</span>
<span class="kd">const</span> <span class="nx">myFunc2</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">};</span>
</code></pre></div>      </div>

      <p>Если аргументов несколько, то нужно обернуть их в скобки ()</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>

<span class="c1">// Функция sum вернет 3</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
</code></pre></div>      </div>

      <p>Если нужно задать функцию без аргументов, используются пустые скобки.</p>

      <p>В примере вызов <code class="language-plaintext highlighter-rouge">getTime()</code> будет возвращать текущий час.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getTime</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getHours</span><span class="p">()}</span><span class="s2">:`</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">getTime</span><span class="p">());</span>
</code></pre></div>      </div>

      <p>Когда тело функции достаточно большое, то можно его обернуть в фигурные скобки.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getTime</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span>
<span class="err">  </span><span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">hours</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">minutes</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p>☝️🧐 Заметим, что как только тело функции оборачивается в {…}, то её результат уже не возвращается автоматически, как в кратком синтаксисе. Такой функции нужен явный <code class="language-plaintext highlighter-rouge">return</code>, если, конечно, нужно что-либо возвратить.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myFunc3</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">myFunc4</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">newSum</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>

<span class="err">  </span><span class="c1">// Здесь нужно явно вернуть результат</span>
<span class="err">  </span><span class="k">return</span> <span class="nx">newSum</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p><strong>Примеры</strong> использования стрелочных функций для обратного вызова.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myArr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>

<span class="cm">/* В методе Array.sort используем стрелочную
функцию обратного вызова. Такая запись –
коротка и понятна… */</span>
<span class="kd">const</span> <span class="nx">sorted</span> <span class="o">=</span> <span class="nx">myArr</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">);</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">sorted</span><span class="p">);</span> <span class="c1">// 3, 5, 8</span>

<span class="cm">/* В gulpfil'e функции-стрелки также используются
для обратного вызова */</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">twig</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span>
<span class="err">  </span><span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">'</span><span class="s1">/src/*.twig</span><span class="dl">'</span><span class="p">)</span>
<span class="err">    </span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">'</span><span class="s1">/dist</span><span class="dl">'</span><span class="p">)),</span>
<span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-12">Когда стрелочные функции использовать нельзя</h4>

      <p><strong>Во-первых</strong>, их бесполезно использовать, как методы объектов.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">cat</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">lives</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
<span class="err">  </span><span class="na">jumps</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">lives</span><span class="o">--</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>Если вызвать <code class="language-plaintext highlighter-rouge">cat.jumps</code> из примера, количество жизней не уменьшается. Это происходит потому, что <code class="language-plaintext highlighter-rouge">this</code> в стрелочной функции не привязывается к внешнему объекту.</p>

      <p><strong>Во-вторых</strong>. Если нам нужен динамический контекст — в частности, в обратном вызове стрелочная функция вернет TypeError. Это связано с тем, что <code class="language-plaintext highlighter-rouge">this</code> не привязана к источнику события.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">press</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// `this` здесь будет возвращать ошибку</span>
<span class="err">  </span><span class="k">this</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="dl">'</span><span class="s1">on</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>      </div>

      <p>Решение — использовать вместо <code class="language-plaintext highlighter-rouge">this</code> объект <code class="language-plaintext highlighter-rouge">event</code> и его свойства <code class="language-plaintext highlighter-rouge">currentTarget</code> (объект на который установлен слушатель) или <code class="language-plaintext highlighter-rouge">target</code> (инициатор события, может быть потомком целевого объекта — например, <code class="language-plaintext highlighter-rouge">span</code>‘ом в кнопке).</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="dl">'</span><span class="s1">on</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>      </div>

      <h4 id="section-13">Когда точно стоит использовать стрелочные функции</h4>

      <p>Стрелочные функции отлично подойдут для случаев, когда вам не нужен собственный контекст функции.</p>

      <p>Также мне очень нравится использовать стрелочные функции во всяких <code class="language-plaintext highlighter-rouge">forEach</code> (с использованием e.currentTarget), <code class="language-plaintext highlighter-rouge">map</code> и <code class="language-plaintext highlighter-rouge">reduce</code> — код так лучше читается.</p>

      <h4 id="arguments">Кстати, у функций-стрелок нет переменной <code class="language-plaintext highlighter-rouge">arguments</code></h4>

      <p>Но они могут использовать псевдомассив аргументов внешней, традиционной функции.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">myFunc5</span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">showArg</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">alert</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

<span class="err">  </span><span class="cm">/* Вызов showArg() вернет «Ты это видел?»,
  получив его из аргументов myFunc5 */</span>
<span class="err">  </span><span class="nx">showArg</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">myFunc5</span><span class="p">(</span><span class="dl">'</span><span class="s1">Ты это видел?</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-functions-callback">
  <summary class="accordion__header">
    Функция обратного вызова, callback
  </summary>
  <div class="accordion__body">
      <p>Синтаксис функции через «стрелку» <code class="language-plaintext highlighter-rouge">=&gt;</code>, без ключевого слова <code class="language-plaintext highlighter-rouge">function</code> и в простых, однострочных случаях без ключевого слова  <code class="language-plaintext highlighter-rouge">return</code>.</p>

      <p>Компактность функций-стрелок значительно облегчает чтение кода. Но главная особенность стрелочных функций в другом. <strong>У них нет своего <code class="language-plaintext highlighter-rouge">this</code>.</strong> Если происходит обращение к <code class="language-plaintext highlighter-rouge">this</code>, его значение берётся снаружи, из внешней функции.</p>

      <p>Функции-стрелки предназначены для небольшого кода (например, обратного вызова), который не имеет своего контекста, выполняясь в родительском.</p>

      <p>В примере внутри <code class="language-plaintext highlighter-rouge">forEach</code> использована стрелочная функция. И это значит, что <code class="language-plaintext highlighter-rouge">this.title</code> в ней будет иметь точно такое же значение, как в методе <code class="language-plaintext highlighter-rouge">showList</code> — <code class="language-plaintext highlighter-rouge">group.title</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">group</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Наш курс</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">students</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Вася</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Петя</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Даша</span><span class="dl">'</span><span class="p">],</span>

<span class="err">  </span><span class="nx">showList</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">students</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span>
<span class="err">      </span><span class="c1">// стрелочная функция, в которой this тот</span>
<span class="err">      </span><span class="c1">// же, что и у родительского метода</span>
<span class="err">      </span><span class="nx">student</span> <span class="o">=&gt;</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="s2">: student`</span><span class="p">),</span>
<span class="err">    </span><span class="p">);</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p>⚠️ <strong>Стрелочные функции не надо писать везде.</strong> Главным образом — там, где нужно сохранить контекст родителя: обработчиках событий, ajax-запросах, анимации (<code class="language-plaintext highlighter-rouge">setInterval</code>, <code class="language-plaintext highlighter-rouge">setTimeout</code>). То есть, <strong>когда функция передается, как аргумент в другую функцию или встроенный метод</strong>.</p>

      <p>⛔️ Стрелочные функции не могут быть использованы как конструкторы, с <code class="language-plaintext highlighter-rouge">new</code> — потому что у них нет <code class="language-plaintext highlighter-rouge">this</code>. У функций-стрелок нет свойства <code class="language-plaintext highlighter-rouge">prototype</code>.</p>

      <h4 id="section-14">Простейший вариант стрелочной функции</h4>

      <p>Слева от <code class="language-plaintext highlighter-rouge">=&gt;</code> находится параметр (<code class="language-plaintext highlighter-rouge">x</code> в данном случае), а справа – выражение, которое нужно вернуть. Без слова <code class="language-plaintext highlighter-rouge">return</code> — в кратком синтаксисе стрелочных функций результат возвращается без лишних формальностей.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myFunc</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Сейчас функция myFunc вернет 2</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">myFunc</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>

<span class="c1">// Та же функция в традиционном синтаксисе:</span>
<span class="kd">const</span> <span class="nx">myFunc2</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">};</span>
</code></pre></div>      </div>

      <p>Если аргументов несколько, то нужно обернуть их в скобки ()</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>

<span class="c1">// Функция sum вернет 3</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
</code></pre></div>      </div>

      <p>Если нужно задать функцию без аргументов, используются пустые скобки.</p>

      <p>В примере вызов <code class="language-plaintext highlighter-rouge">getTime()</code> будет возвращать текущий час.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getTime</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getHours</span><span class="p">()}</span><span class="s2">:`</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">getTime</span><span class="p">());</span>
</code></pre></div>      </div>

      <p>Когда тело функции достаточно большое, то можно его обернуть в фигурные скобки.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getTime</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span>
<span class="err">  </span><span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">hours</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">minutes</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p>☝️🧐 Заметим, что как только тело функции оборачивается в {…}, то её результат уже не возвращается автоматически, как в кратком синтаксисе. Такой функции нужен явный <code class="language-plaintext highlighter-rouge">return</code>, если, конечно, нужно что-либо возвратить.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myFunc3</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">myFunc4</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">newSum</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>

<span class="err">  </span><span class="c1">// Здесь нужно явно вернуть результат</span>
<span class="err">  </span><span class="k">return</span> <span class="nx">newSum</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p><strong>Примеры</strong> использования стрелочных функций для обратного вызова.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myArr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>

<span class="cm">/* В методе Array.sort используем стрелочную
функцию обратного вызова. Такая запись –
коротка и понятна… */</span>
<span class="kd">const</span> <span class="nx">sorted</span> <span class="o">=</span> <span class="nx">myArr</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">);</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">sorted</span><span class="p">);</span> <span class="c1">// 3, 5, 8</span>

<span class="cm">/* В gulpfil'e функции-стрелки также используются
для обратного вызова */</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">twig</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span>
<span class="err">  </span><span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">'</span><span class="s1">/src/*.twig</span><span class="dl">'</span><span class="p">)</span>
<span class="err">    </span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">'</span><span class="s1">/dist</span><span class="dl">'</span><span class="p">)),</span>
<span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-15">Когда стрелочные функции использовать нельзя</h4>

      <p><strong>Во-первых</strong>, их бесполезно использовать, как методы объектов.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">cat</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">lives</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
<span class="err">  </span><span class="na">jumps</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">lives</span><span class="o">--</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>Если вызвать <code class="language-plaintext highlighter-rouge">cat.jumps</code> из примера, количество жизней не уменьшается. Это происходит потому, что <code class="language-plaintext highlighter-rouge">this</code> в стрелочной функции не привязывается к внешнему объекту.</p>

      <p><strong>Во-вторых</strong>. Если нам нужен динамический контекст — в частности, в обратном вызове стрелочная функция вернет TypeError. Это связано с тем, что <code class="language-plaintext highlighter-rouge">this</code> не привязана к источнику события.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">press</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// `this` здесь будет возвращать ошибку</span>
<span class="err">  </span><span class="k">this</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="dl">'</span><span class="s1">on</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>      </div>

      <p>Решение — использовать вместо <code class="language-plaintext highlighter-rouge">this</code> объект <code class="language-plaintext highlighter-rouge">event</code> и его свойства <code class="language-plaintext highlighter-rouge">currentTarget</code> (объект на который установлен слушатель) или <code class="language-plaintext highlighter-rouge">target</code> (инициатор события, может быть потомком целевого объекта — например, <code class="language-plaintext highlighter-rouge">span</code>‘ом в кнопке).</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="dl">'</span><span class="s1">on</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>      </div>

      <h4 id="section-16">Когда точно стоит использовать стрелочные функции</h4>

      <p>Стрелочные функции отлично подойдут для случаев, когда вам не нужен собственный контекст функции.</p>

      <p>Также мне очень нравится использовать стрелочные функции во всяких <code class="language-plaintext highlighter-rouge">forEach</code> (с использованием e.currentTarget), <code class="language-plaintext highlighter-rouge">map</code> и <code class="language-plaintext highlighter-rouge">reduce</code> — код так лучше читается.</p>

      <h4 id="arguments-1">Кстати, у функций-стрелок нет переменной <code class="language-plaintext highlighter-rouge">arguments</code></h4>

      <p>Но они могут использовать псевдомассив аргументов внешней, традиционной функции.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">myFunc5</span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">showArg</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">alert</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

<span class="err">  </span><span class="cm">/* Вызов showArg() вернет «Ты это видел?»,
  получив его из аргументов myFunc5 */</span>
<span class="err">  </span><span class="nx">showArg</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">myFunc5</span><span class="p">(</span><span class="dl">'</span><span class="s1">Ты это видел?</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-functions-parameters-destructuring">
  <summary class="accordion__header">
    Деструктуризация в параметрах
  </summary>
  <div class="accordion__body">
      <p>См. также <a href="#topic-objects-destructuring">деструктурирующее присваивание или просто деструктуризацию</a></p>

      <p>Деструктуризация в параметрах — это возможность функции получать значения из объекта или массива, переданного в параметры. Для этого параметры функции заключаются в фигурные скобки, как объект.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">showMenu</span><span class="p">({</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">})</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">title</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">width</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">height</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Меню</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="err">  </span><span class="na">height</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* Объект options будет разбит на переменные.
В диалог будет выведено «Меню 100 200» */</span>
<span class="nx">showMenu</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Можно использовать деструктуризацию со значениями по умолчанию.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">showNewMenu</span><span class="p">({</span>
<span class="err">  </span><span class="nx">title</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Заголовок</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="nx">width</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="err">  </span><span class="nx">height</span> <span class="o">=</span> <span class="mi">200</span>
<span class="p">})</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">title</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">width</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">height</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* И в таком случае можно передавать объект только
с измененным значением */</span>
<span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Меню</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// Меню 100 200</span>
<span class="nx">showNewMenu</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Чтобы функция могла быть вызвана вообще без аргументов, нужно добавить ей параметр по умолчанию — пустой объект, пустые фигурные скобки после объекта с параметрами по умолчанию и знака равенства.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">showThirdMenu</span><span class="p">({</span>
<span class="err">  </span><span class="nx">title</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Заголовок</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="nx">w</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="err">  </span><span class="nx">h</span> <span class="o">=</span> <span class="mi">200</span>
<span class="p">}</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">title</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">w</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">h</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Заголовок 100 200</span>
<span class="nx">showThirdMenu</span><span class="p">();</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-functions-rest-parameters-spread-operator">
  <summary class="accordion__header">
    Остаточные параметры, оператор расширения и псевдомассив `arguments`
  </summary>
  <div class="accordion__body">
      <p>В JS-функции можно передавать произвольное количество параметров в виде массива. Как в пользовательские, так и в некоторые встроенные методы. Например:</p>

      <p><code class="language-plaintext highlighter-rouge">Math.max(...numbers)</code></p>

      <h4 id="rest-">Остаточные (или rest) параметры</h4>

      <p>Вызывать функцию можно с любым количеством аргументов. Даже если она определена с одним параметром, а в нее передали десять, ошибки не будет. Просто 9 аргументов не будут использованы в расчетах, но и не пропадут бесследно — сохранятся в пседомассиве <code class="language-plaintext highlighter-rouge">arguments</code>.</p>

      <p><strong>Остаточные параметры</strong> принимают множество значений, которые интерпретируются функцией, как массив.</p>

      <p>Записываются как произвольное имя после трех точек. Может быть, как единственным параметром, так и одним из нескольких. Во втором случае записывается последним.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pupil</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="p">...</span><span class="nx">marks</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">marks</span><span class="p">);</span>
<span class="p">};</span>


<span class="cm">/* Первый аргумент передается в параметр name.
Остальные — в оператор расширения …marks */</span>
<span class="nx">pupil</span><span class="p">(</span><span class="dl">'</span><span class="s1">Вова</span><span class="dl">'</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-17">Пример  №2</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">abccc</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="p">...</span><span class="nx">c</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* В консоль будет выведены поочередно 'one',
'two', ['three', 'four', 'five'] */</span>
<span class="nx">abccc</span><span class="p">(</span><span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">four</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">five</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-18">Пример  №3</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">showName</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="p">...</span><span class="nx">rest</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">lastName</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">rest</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* В диалог будет выведено: Юлий Цезарь -
Император Рима. В rest попадёт массив всех
аргументов, начиная с третьего. Собранные
в rest данные станут настоящим массивом,
с методами map, forEach и пр. */</span>
<span class="nx">showName</span><span class="p">(</span><span class="dl">'</span><span class="s1">Юлий</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Цезарь</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Император</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Рима</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="spread-">Оператор расширения (spread-оператор)</h4>

      <p>Если троеточие в параметрах — признак остаточных параметров. То троеточие в caller’е указывает на оператор расширения или спред-оператор. Он позволяет передавать в функцию массив.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myArr1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span>

<span class="cm">/* Вызов метода max с оператором расширения
аналогичен Math.max(3, 5, 1) — оператор
"раскрывает" массив в список аргументов) */</span>
<span class="nx">alert</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(...</span><span class="nx">myArr1</span><span class="p">));</span>
</code></pre></div>      </div>

      <p>Этим же способом мы можем передать несколько итерируемых объектов:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myArr2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span>

<span class="nx">alert</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(...</span><span class="nx">myArr1</span><span class="p">,</span> <span class="p">...</span><span class="nx">myArr2</span><span class="p">));</span>
</code></pre></div>      </div>

      <p>Мы можем комбинировать оператор расширения с обычными значениями:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">alert</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">...</span><span class="nx">myArr1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">...</span><span class="nx">myArr2</span><span class="p">,</span> <span class="mi">25</span><span class="p">));</span> <span class="c1">// 25</span>
</code></pre></div>      </div>

      <p>Оператор расширения можно использовать и для слияния массивов:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">merged</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">...</span><span class="nx">myArr1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">...</span><span class="nx">myArr2</span><span class="p">];</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">merged</span><span class="p">);</span> <span class="c1">// 0, 3, 5, 1, 8, 3, -8, 1</span>
</code></pre></div>      </div>

      <h4 id="spread-----">Использование spread-оператора для создания копии массива</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">shallowCopy</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">myArr1</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">anotherShallowCopy</span> <span class="o">=</span> <span class="p">[</span>
<span class="err">  </span><span class="p">...</span><span class="nx">myArr1</span><span class="p">,</span> <span class="p">...</span><span class="nx">myArr2</span><span class="p">,</span> <span class="mi">41</span>
<span class="p">];</span>
</code></pre></div>      </div>

      <p>Spread-оператор, также, как и метод <code class="language-plaintext highlighter-rouge">assign()</code> создают так называемую мелкую копию (<code class="language-plaintext highlighter-rouge">shallow copy</code>). Это означает, что при дублировании вложенных объектов в новый объект будет скопирован полностью только первый уровень. Вместо вложенных объектов будут добавлены ссылки на них в «подлиннике».</p>

      <p>☝️🧐  Чтобы полностью дублировать вложенные свойства (методы, в принципе, нельзя), используют методы JSON <code class="language-plaintext highlighter-rouge">stringify</code> (конвертация в строку) и <code class="language-plaintext highlighter-rouge">parse</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">source</span> <span class="o">=</span>
<span class="p">{</span>
<span class="err">  </span><span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="err">  </span><span class="na">b</span><span class="p">:</span> <span class="p">{</span>
<span class="err">    </span><span class="na">c</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">source</span><span class="p">));</span>
</code></pre></div>      </div>

      <h3 id="spread------">Spread-оператор работает с любыми перебираемыми объектами</h3>

      <p>В примерах выше мы использовали массив, чтобы продемонстрировать свойства оператора расширения, но он работает с любым перебираемым объектом.</p>

      <p>Например, оператор расширения подойдёт для того, чтобы превратить строку в массив символов:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Привет</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">([...</span><span class="nx">str</span><span class="p">]);</span> <span class="c1">// П,р,и,в,е,т</span>
</code></pre></div>      </div>

      <p>Оператор расширения перебирает строку как последовательность символов, поэтому из <code class="language-plaintext highlighter-rouge">...str</code> получается “П”, “р”, “и”, “в”, “е”, “т”. Получившиеся символы собираются в массив при помощи стандартного объявления массива, через квадратные скобки — <code class="language-plaintext highlighter-rouge">[...str]</code>.</p>

      <p>Впрочем, задачу перевода разных данных в массив лучше выполнять более универсальным методом <code class="language-plaintext highlighter-rouge">Array.from</code>. Он работает не только с итерируемыми объектами (такими, как строка), но и с псевдомассивами (такими, как <code class="language-plaintext highlighter-rouge">NodeList</code>).</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">alert</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">str</span><span class="p">));</span> <span class="c1">// П,р,и,в,е,т</span>
</code></pre></div>      </div>

      <h4 id="arguments------">Объект <code class="language-plaintext highlighter-rouge">arguments</code> — устаревший способ доступа к аргументам</h4>

      <p>Раньше в языке не было остаточных параметров, и получить все аргументы функции можно было только с помощью псевдомассива <code class="language-plaintext highlighter-rouge">arguments</code>. Хотя способ всё ещё работает, мы можем найти его в старом коде.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">showName</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
<span class="err">  </span><span class="nx">alert</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>

<span class="err">  </span><span class="c1">// Объект arguments можно перебирать</span>
<span class="err">  </span><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">arg</span> <span class="k">of</span> <span class="nx">arguments</span><span class="p">)</span> <span class="nx">alert</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Вывод: 2, Юлий, Цезарь</span>
<span class="nx">showName</span><span class="p">(</span><span class="dl">"</span><span class="s2">Юлий</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Цезарь</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 1, Вова, undefined (второго аргумента нет)</span>
<span class="nx">showName</span><span class="p">(</span><span class="dl">"</span><span class="s2">Вова</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Хотя <code class="language-plaintext highlighter-rouge">arguments</code> можно перебирать, псевдомассив не поддерживает методы массивов, например, <code class="language-plaintext highlighter-rouge">map()</code>.</p>

      <p>К тому же, <code class="language-plaintext highlighter-rouge">arguments</code> всегда содержит все аргументы функции — нельзя получить их часть. А остаточные параметры позволяют это сделать.</p>

      <p>☝️🧐 Стрелочные функции не имеют <code class="language-plaintext highlighter-rouge">arguments</code>. Если мы обратимся к <code class="language-plaintext highlighter-rouge">arguments</code> из стрелочной функции, то получим аргументы внешней «нормальной» функции.</p>

      <p>Соответственно, для более удобной работы с аргументами <strong>лучше использовать остаточные параметры</strong>.</p>
    </div>
</details>
<details class="accordion" id="topic-functions-closure">
  <summary class="accordion__header">
    Замыкание (closure) и самовызывающиеся функции
  </summary>
  <div class="accordion__body">
      <p>Замыкание — вложенная функция, имеющая доступ к переменным внешних функций; при этом все её внутренние переменные для внешних скриптов скрыты. Собственные, а также доступные родительские переменные и параметры называются окружением.</p>

      <p>Замыкание используется для ограничения области видимости и создания частных переменных, которые не могут изменить другие скрипты на странице.</p>

      <p>Замыкания часто используются для сохранения состояния в обработчиках событий.</p>

      <h4 id="section-19">Самовызывающиеся функции и выражения</h4>

      <p>Замыканием может стать любая вложенная функция. Но когда замыкание создают специально, обычно в качестве родителя используют самовызывающиеся функциональное выражение или анонимную функцию. Родительские переменные и параметры передаются вложенным функциям, и в дальнейшим не возвращаются к исходным значениям до окончания сессии.</p>

      <p>После самовызова родительской функции код оперируют только значениями, возвращаемыми вложенными функциями.</p>

      <p>Самовызывающееся выражение или функция, как следует, из названия срабатывают без вызова, сразу после своего объявления. Используется, когда нужно выполнить код один раз и сохранить его результаты для вложенных функций, без объявления глобальных переменных). Записывается с помощью двух пар круглых скобок и точки с запятой.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Анонимная самовызывающаяся функция IIFE
(Immediately-invoked Function Expression) */</span>
<span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// код функции</span>
<span class="p">})();</span>

<span class="cm">/**
 * Самовызывающееся функциональное выражение.
 * Создает замыкание для вложенной функции.
 * Переменной add присваивается результат
 * самовызывающейся функции, а это — вложенная
 * функция increment().
 */</span>
<span class="kd">const</span> <span class="nx">add</span> <span class="o">=</span> <span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="cm">/* Переменная counter, созданная в add, передает
  значение вложенной функции increment() только
  раз. Далее в коде уже используются результаты
  increment(). В примере counter будет
  равняться 0 ровно до момента, когда
  increment() не увеличит его до единицы. */</span>
<span class="err">  </span><span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="err">  </span><span class="cm">/**
   * Вложенная функция.
   * @return {Number}
   */</span>
<span class="err">  </span><span class="kd">function</span> <span class="nx">increment</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">counter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="err">    </span><span class="k">return</span> <span class="nx">counter</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="k">return</span> <span class="nx">increment</span><span class="p">;</span>
<span class="p">})();</span>

<span class="nx">add</span><span class="p">();</span> <span class="c1">// Выражение вернет 1</span>
<span class="nx">add</span><span class="p">();</span> <span class="c1">// Выражение вернет 2</span>
<span class="nx">add</span><span class="p">();</span> <span class="c1">// Выражение вернет 3</span>
</code></pre></div>      </div>

      <h3 id="iife--">IIFE с параметрами</h3>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// В первой строке мы определяем два параметра</span>
<span class="p">((</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">times</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// В цикл передаем аргументы…</span>
<span class="err">  </span><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">times</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="cm">/* …которые получаем при вызове функции в последней
строке */</span>
<span class="p">}(</span><span class="dl">"</span><span class="s2">Hello!</span><span class="dl">"</span><span class="p">,</span> <span class="mi">5</span><span class="p">));</span>

<span class="c1">// Пример из jQuery</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">global</span><span class="p">,</span> <span class="nb">document</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// use $ for jQuery, global for window</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">));</span>
</code></pre></div>      </div>

      <h4 id="section-20">Локальная область видимости</h4>

      <p>С каждой функцией связывается окружение, которое содержит локальные переменные из внешней области видимости (функции-родителя). Вызывая функцию на другом уровне, мы получаем и связанные с ней локальные переменные.</p>

      <p>На книжном языке это явление еще объясняют так. Каждая функция определяют свою лексическую область действия, объект переменных LexicalEnvironment. Каждый запуск функции создает новый такой объект. На верхнем уровне им является «глобальный объект», в браузере – window. Таким образом программа создает несколько объектов с независимыми свойствами и методами.</p>
    </div>
</details>
<details class="accordion" id="topic-functions-recursion">
  <summary class="accordion__header">
    Рекурсивные функции
  </summary>
  <div class="accordion__body">
      <p>В теле функции могут быть вызваны другие функции для выполнения подзадач. Но также функция может вызвать сама себя. Это называется рекурсией.</p>

      <p>Любая рекурсивная функция может быть заменена циклом.</p>

      <h4 id="section-21">Пример №1</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">countSheep</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">number</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Zzzzzz</span><span class="dl">'</span><span class="p">);</span>
<span class="err">  </span><span class="c1">// Пока количество овец не равно 0…</span>
<span class="err">  </span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">    </span><span class="c1">// …Комментировать прыжок очередной овцы.</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">A sheep jumps over the fence.</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="c1">// Рекурсивный вызов функции. Аргумент number</span>
<span class="err">    </span><span class="c1">// уменьшается на единицу</span>
<span class="err">    </span><span class="nx">countSheep</span><span class="p">(</span><span class="nx">number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">countSheep</span><span class="p">(</span><span class="mi">24</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Хотя в большинстве случаев цикл проще, понятнее рекурсии и не создает проблем со стеком (выделенным ресурсом оперативной памяти), используют то, что более удобно. Если реализация очевидна в терминах цикла, не следует использовать рекурсию. И наоборот.</p>

      <p>Так, в цикле разумнее решать задачи, где результат следующего полностью зависит от результата предыдущего.</p>

      <p><strong>При таких задачах, как обход вложенных каталогов</strong>, когда у каждого имеется ряд своих отдельных переменных (например, количество файлов в данном каталоге), <strong>легче поддерживать рекурсию</strong>. Потому что обход одного каталога совсем не зависит от результатов обхода другого соседнего каталога, и они могут <strong>работать параллельно</strong>, независимо друг от друга. А затем в конце просто объединяют все свои результаты.</p>

      <p><strong>Скорость вычислений и потребление ресурсов.</strong> На малых числах циклы и рекурсии почти не отличаются. На больших — рекурсия быстрее, но при этом использует больше оперативной памяти и ресурсов ЦП (центрального процессора; CPU).</p>

      <p>Промежуточные результаты вычисления рекурсивных функций часто сохраняются не в переменных, а в стеке (см. термины)</p>

      <h4 id="section-22">Пример №2. возведение в степень</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// Пока n не равно 1…</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="cm">/* …Функция вызывает сама себя, возвращает
    промежуточные результаты, всякий раз
    уменьшая аргумент степени на единицу
    return 2 * pow(2, 2)
    return 2 * pow(2, 1) */</span>
<span class="err">    </span><span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 2^3 = 8</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span>
</code></pre></div>      </div>

      <h4 id="section-23">Пример №3</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">howManyDollars</span><span class="p">(</span><span class="nx">amountOfMoney</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="cm">/* Как правило, рекурсивная функция требует
    условия прекращения — во избежание
    бесконечных циклов */</span>
<span class="err">    </span><span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="err">      </span><span class="dl">'</span><span class="s1">The negative numbers are not allowed</span><span class="dl">'</span>
<span class="err">    </span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="cm">/* Т.н. базовый случай. Обычно — в конструкции
  if(). Условие окончания вычислений, выхода
  из функции, возвращение перехода к дальнейшим
  инструкциям в порядке исполнения. */</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">amountOfMoney</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>


<span class="err">  </span><span class="cm">/* Теперь функция вызывает сама себя —
  рекурсивный случай. И будет вызывать до тех
  пор, пока не достигнет условия базового
  случая — в рекурсивном случае должны быть
  заложены соответствующие вычисления. В данном
  примере (расчет сдачи при оплате покупки),
  если в сдаче меньше доллара, функция
  возвращает ноль — долларов покупателю
  не вернут. Если amountOfMoney больше доллара,
  функция откладывает 1 доллар «в сторону»,
  вычитает его из суммы сдачи. И снова
  запускает себя — до тех пор, пока не вычтет
  из суммы сдачи все целые доллары. */</span>
<span class="err">  </span><span class="k">return</span>
<span class="err">    </span><span class="mi">1</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">howManyDollars</span><span class="p">(</span><span class="nx">amountOfMoney</span> <span class="o">-</span> <span class="mf">1.00</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="section-24">Пример №4 — факториал</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">factorial</span> <span class="o">=</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="cm">/* Рекурсивный вызов с механизмом достижения
  базового случая - уменьшением аргумента */</span>
<span class="err">  </span><span class="k">return</span> <span class="nx">n</span> <span class="o">*</span> <span class="nx">factorial</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* В этом примере функция вызвана с аргументом 3.
Факториал числа n — произведение всех
натуральных чисел от 1 до n включительно. То
есть, нам нужно перемножить 3 * 2 * 1
и получить 6.

1) Первая итерация. 3 больше 1, значит
выполняется рекурсивный вызов. Умножаем
аргумент на факториал числа, меньшего на
единицу.
n = 3
n - 1 = 2
3 * factorial(2)
Но факториал двух нам тоже не известен.

2) Рекурсивный вызов — factorial(2).
2 * factorial(1)
Факториал единицы пока также не известен,
поэтому процедура повторяется.

3) Достигнут базовый случай n &lt;= 1
Мы получили первый ответ, который используем
поднимаясь по стеку, по логической лестнице
вверх.

4) Компьютер вычисляет факториал двух 2.
2 * 1 = 2

5) Затем, когда получено значение факториала
двух, компьютер возвращается к расчету
исходного задания — факториалу трех:
3 * 2 = 6 */</span>

<span class="nx">factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-25">Пример №5</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">change</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="cm">/* Рекурсивные функции могут иметь сколько угодно
параметров… */</span>
<span class="kd">function</span> <span class="nx">howManyCoins</span><span class="p">(</span>
<span class="err">  </span><span class="nx">coinName</span><span class="p">,</span> <span class="nx">coinAmount</span><span class="p">,</span> <span class="nx">coinsSoFar</span>
<span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">change</span> <span class="o">&lt;</span> <span class="nx">coinAmount</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">coinsSoFar</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">coinName</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">change</span> <span class="o">-=</span> <span class="nx">coinAmount</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="cm">/* …Но в рекурсивном случае меняется, как
  правило, один или два. При этом
  задействованные параметры должны меняться
  так, чтобы приближать исполнение условия
  базового случая. В данном примере
  увеличивается количество монет определенного
  номинала в сдаче — до тех пор, пока сдача
  больше суммы монеток этого номинала */</span>
<span class="err">  </span><span class="k">return</span> <span class="nx">howManyCoins</span><span class="p">(</span>
<span class="err">    </span><span class="nx">coinName</span><span class="p">,</span> <span class="nx">coinAmount</span><span class="p">,</span> <span class="nx">coinsSoFar</span> <span class="o">+</span> <span class="mi">1</span>
<span class="err">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">howManyCoins</span><span class="p">(</span><span class="dl">'</span><span class="s1">dollar bills</span><span class="dl">'</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">howManyCoins</span><span class="p">(</span><span class="dl">'</span><span class="s1">quarters</span><span class="dl">'</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">howManyCoins</span><span class="p">(</span><span class="dl">'</span><span class="s1">dimes</span><span class="dl">'</span><span class="p">,</span> <span class="mf">0.10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

</code></pre></div>      </div>
    </div>
</details>
</section>

<section>
  <h2>Объекты</h2><details class="accordion" id="topic-objects-overview">
  <summary class="accordion__header">
    Введение
  </summary>
  <div class="accordion__body">
      <p>Составной тип данных — коллекция свойств и методов (функций) в формате ключ-значение.</p>

      <p>Объект может быть пользовательским или встроенным. За исключением примитивных типов данных (строк, чисел, булевых), всё в JS является объектами: массивы (не только ассоциативные, но и индексные), функции, глобальный объект, объект <code class="language-plaintext highlighter-rouge">Date</code>, объект  <code class="language-plaintext highlighter-rouge">Math</code> и т.д.</p>

      <p>В языках программирования выражение, создающее объект, называется литералом. После закрывающей скобки ставится точка с запятой.</p>

      <p>☝️🧐 Рекомендация Airbnb — добавлять запятую после последней пары. Так минимизируется риск ошибки при правке объектов. eslint: comma-dangle</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myObj</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">key2</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">key3</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="nx">objMethod</span><span class="p">(</span><span class="nx">some</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-26">Объекты могут содержать данные любого типа…</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myPerson</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Вова</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Most excellent</span><span class="dl">'</span><span class="p">,</span>

<span class="err">  </span><span class="c1">// …в том числе — массивы…</span>
<span class="err">  </span><span class="na">interests</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">rock</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">women</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">cognac</span><span class="dl">'</span><span class="p">],</span>

<span class="err">  </span><span class="c1">// …в том числе — методы (функции)</span>
<span class="err">  </span><span class="nx">love</span><span class="p">(</span><span class="nx">some</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span>
<span class="err">  </span><span class="nx">read</span><span class="p">(</span><span class="nx">some</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span>
<span class="err">  </span><span class="nx">watchSeries</span><span class="p">(</span><span class="nx">some</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span>

<span class="err">  </span><span class="c1">// Объекты могут содержать и другие объекты</span>
<span class="err">  </span><span class="na">daughter</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Paula</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">27</span> <span class="p">},</span>
<span class="err">  </span><span class="na">wife</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Sonya</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">48</span> <span class="p">},</span>

<span class="err">  </span><span class="cm">/* Если в «ключе» есть пробелы, его необходимо
  заключить в кавычки. */</span>
<span class="err">  </span><span class="dl">'</span><span class="s1">has job</span><span class="dl">'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-27">Создание пустого объекта</h4>

      <p>Пустые объекты создаются для того, чтобы их свойства можно было добавлять динамически в зависимости от логики кода.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">emptyObject</span> <span class="o">=</span> <span class="p">{};</span>
</code></pre></div>      </div>

      <h4 id="section-28">Создание экземпляра существующего объекта</h4>

      <p>Метод <code class="language-plaintext highlighter-rouge">Object.create()</code> создаёт новый объект с указанным прототипом и свойствами.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">animal</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">say</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> goes </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">voice</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">dog</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">animal</span><span class="p">);</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Dog</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">voice</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">woof</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div>      </div>

      <p>Однако более практичный способ — создать <a href="/js/advanced-theory.html#topic-classes-new">экземпляр класса</a>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">cat</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Animal</span><span class="p">();</span>
<span class="nx">cat</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Cat</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">cat</span><span class="p">.</span><span class="nx">voice</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">meow</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div>      </div>

      <h4 id="section-29">Динамические ключи</h4>

      <p>Потребность в такой возможности возникает редко, но в ключах объекта можно использовать переменные.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">my</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="p">[</span><span class="s2">`</span><span class="p">${</span><span class="nx">prefix</span><span class="p">}</span><span class="s2">Name`</span><span class="p">]:</span> <span class="dl">'</span><span class="s1">Vova</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="p">[</span><span class="s2">`</span><span class="p">${</span><span class="nx">prefix</span><span class="p">}</span><span class="s2">Age`</span><span class="p">]:</span> <span class="mi">50</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-properties">
  <summary class="accordion__header">
    Свойства
  </summary>
  <div class="accordion__body">
      <p>Свойства объектов представляют собой пары <code class="language-plaintext highlighter-rouge">ключ: значение</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myObj</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// Это свойства</span>
<span class="err">  </span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Вова</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">age</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>

<span class="err">  </span><span class="nx">whatIamDoingRightNow</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="c1">// А это метод</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-30">«Точечная запись» или «точечная нотация»</h4>

      <p>☝️🧐 В вычислениях свойство не используют напрямую. Сначала сохраняют в переменную.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">itsMe</span> <span class="o">=</span> <span class="nx">myObj</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</code></pre></div>      </div>

      <p>Но используют в условиях, в том числе условиях циклов…</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">fiat</span><span class="p">.</span><span class="nx">year</span> <span class="o">&lt;</span> <span class="mi">1965</span><span class="p">)</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">fiat</span><span class="p">.</span><span class="nx">passengers</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>А также в шаблонных строках</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">speak</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">dog</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> says </span><span class="p">${</span><span class="nx">dog</span><span class="p">.</span><span class="nx">bark</span><span class="p">}</span><span class="s2"> when he wants to </span><span class="p">${</span><span class="nx">dog</span><span class="p">.</span><span class="nx">activity</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
</code></pre></div>      </div>

      <h4 id="section-31">Квадратные скобки</h4>

      <p>Свойство можно вызвать и из квадратных скобок. Способ используется реже, но полезен, когда при вызове вместо имени свойства нужно использовать переменную. В квадратных скобках может находиться любое выражение — необходимо лишь, чтобы при его вычислении получалось имя свойства, представленное строкой.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">itsMe</span> <span class="o">=</span> <span class="nx">myObj</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>

<span class="c1">// eslint-disable-next-line no-useless-concat</span>
<span class="nx">itsMe</span> <span class="o">=</span> <span class="nx">myObj</span><span class="p">[</span><span class="dl">'</span><span class="s1">na</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">me</span><span class="dl">'</span><span class="p">];</span>

<span class="nx">itsMe</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myObj</span><span class="p">[</span><span class="nx">itsMe</span><span class="p">]);</span>
</code></pre></div>      </div>

      <h4 id="section-32">Изменение или добавление свойств и методов</h4>

      <p>Достаточно указать существующий или новый ключ и его значение.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myObj</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Вова</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div>      </div>

      <h4 id="section-33">Удаление свойства объекта</h4>

      <p>С помощью оператора <code class="language-plaintext highlighter-rouge">delete</code> удаляются и ключ, и значение. <code class="language-plaintext highlighter-rouge">delete</code> не может быть использован для удаления свойств встроенных объектов.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">delete</span> <span class="nx">myObj</span><span class="p">.</span><span class="nx">age</span><span class="p">;</span>
</code></pre></div>      </div>

      <h4 id="section-34">Атрибуты свойств</h4>

      <p>Специфичный атрибуты свойств — <code class="language-plaintext highlighter-rouge">writable</code>. Определяет, доступно ли данное свойство для записи (по умолчанию, true).</p>

      <p>Общие атрибуты свойств и методов:</p>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">enumerable</code> — определяет доступность свойства для перечисления</li>
        <li><code class="language-plaintext highlighter-rouge">configurable</code> — определяет доступность свойства для изменения (например, может ли свойство быть удалено, может ли быть изменен какой-либо атрибут свойства).</li>
      </ul>

      <h4 id="section-35">Перебор свойств</h4>

      <p>Для перебора используется цикл метод <code class="language-plaintext highlighter-rouge">forEach</code>, а также методы объекта <code class="language-plaintext highlighter-rouge">keys</code>, <code class="language-plaintext highlighter-rouge">values</code>, <code class="language-plaintext highlighter-rouge">entries</code> и методы массива <code class="language-plaintext highlighter-rouge">map</code>, <code class="language-plaintext highlighter-rouge">every</code>, <code class="language-plaintext highlighter-rouge">some</code>, <code class="language-plaintext highlighter-rouge">filter</code>, <code class="language-plaintext highlighter-rouge">reduce</code>, <code class="language-plaintext highlighter-rouge">find</code>, <code class="language-plaintext highlighter-rouge">findIndex</code>.</p>

      <p>⛔️ Ранее для перебора использовались цикл <code class="language-plaintext highlighter-rouge">for...in</code>, однако он перебирает свойства по всей цепочке прототипов, поэтому <a href="https://github.com/airbnb/javascript#iterators--nope">Airbnb рекомендует его избегать</a>. Равно, как и перебор с помощью цикла <code class="language-plaintext highlighter-rouge">for...of</code>.</p>
    </div>
</details>
<details class="accordion" id="topic-objects-methods">
  <summary class="accordion__header">
    Методы
  </summary>
  <div class="accordion__body">
      <p>Это функции объектов. Полезны, чтобы</p>

      <ul>
        <li>обновить свойства объектов,</li>
        <li>сделать вычисления на основе свойств объектов</li>
      </ul>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fiat</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">make</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Fiat</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">model</span><span class="p">:</span> <span class="dl">'</span><span class="s1">500</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">year</span><span class="p">:</span> <span class="mi">1957</span><span class="p">,</span>
<span class="err">  </span><span class="na">started</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="err">  </span><span class="cm">/* Синтаксис: как объявление функции, только без
  ключевого слова */</span>
<span class="err">  </span><span class="nx">beep</span><span class="p">(</span><span class="nx">times</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">times</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
<span class="err">      </span><span class="nx">alert</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Бип!</span><span class="dl">'</span><span class="p">);</span>
<span class="err">    </span><span class="p">}</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-36">Вызов метода объекта</h4>

      <p>Методы вызываются так же, как функции: имя, аргументы в скобках. Только перед именем метода стоит еще имя объекта.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fiat</span><span class="p">.</span><span class="nx">beep</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">goComeOn</span> <span class="o">=</span> <span class="nx">fiat</span><span class="p">.</span><span class="nx">beep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-37">Добавление метода</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fiat</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="k">this</span><span class="p">.</span><span class="nx">started</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-38">Атрибуты методов</h4>

      <p>Специфичные атрибуты методов:</p>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">set</code> — содержит setter, функцию, которая вызывается при записи свойства;</li>
        <li><code class="language-plaintext highlighter-rouge">get</code> — содержит getter, функцию, которая вызывается при чтении свойства.</li>
      </ul>

      <p>Общие атрибуты свойств и методов:</p>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">enumerable</code> — определяет доступность свойства для перечисления</li>
        <li><code class="language-plaintext highlighter-rouge">configurable</code> — определяет доступность свойства для изменения (например, может ли свойство быть удалено, может ли быть изменен какой-либо атрибут свойства).</li>
      </ul>

      <h4 id="section-39">Методы встроенных объектов</h4>

      <p>Методы встроенных объектов — <code class="language-plaintext highlighter-rouge">Global</code>, <code class="language-plaintext highlighter-rouge">String</code>, <code class="language-plaintext highlighter-rouge">Array</code>, <code class="language-plaintext highlighter-rouge">Number</code>, <code class="language-plaintext highlighter-rouge">Math</code>, <code class="language-plaintext highlighter-rouge">Function</code>, <code class="language-plaintext highlighter-rouge">Date</code>, <code class="language-plaintext highlighter-rouge">RegExp</code>, <code class="language-plaintext highlighter-rouge">Boolean</code>, <code class="language-plaintext highlighter-rouge">Object</code> — предназначены для типовых операций с данными</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello world!</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">sayItLoud</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-prototype">
  <summary class="accordion__header">
    Прототип объекта
  </summary>
  <div class="accordion__body">
      <p>У каждого объекта в JS, кроме самого общего <code class="language-plaintext highlighter-rouge">Object</code> и созданных из <code class="language-plaintext highlighter-rouge">null</code>, есть свой шаблон, по которому он был создан. Символ, в терминологии графических редакторов. Шаблон, чьи свойства и методы наследуют  экземпляры — последующие поколения. Это и есть прототип — объект, ставший шаблоном для других объектов.</p>

      <p><img src="/assets/img/js/prototype-chain.png" alt="Цепочка прототипов" /></p>

      <p>Все свойства и методы, которые наследуют потомки, хранятся в одном свойстве — <code class="language-plaintext highlighter-rouge">prototype</code>. Это набор, к которому можно обратиться через точечную нотацию: <code class="language-plaintext highlighter-rouge">myObj.prototype</code>.</p>

      <p>Объект <code class="language-plaintext highlighter-rouge">Date</code> передает наследникам <code class="language-plaintext highlighter-rouge">Date.prototype</code>. Массив — <code class="language-plaintext highlighter-rouge">Array.prototype</code>. Объект <code class="language-plaintext highlighter-rouge">Person</code> в примере передает объектам <code class="language-plaintext highlighter-rouge">myDad</code> и <code class="language-plaintext highlighter-rouge">myMum</code> <code class="language-plaintext highlighter-rouge">Person.prototype</code>. И все они наследуют свойства и методы общего предка — <code class="language-plaintext highlighter-rouge">Object.prototype</code>. В частности, <code class="language-plaintext highlighter-rouge">myDad</code> и <code class="language-plaintext highlighter-rouge">myMom</code> наследуют через <code class="language-plaintext highlighter-rouge">Object.prototype</code> методы <code class="language-plaintext highlighter-rouge">keys</code>, <code class="language-plaintext highlighter-rouge">values</code> и т. д.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
<span class="err">  </span><span class="cm">/**
   * @param {string} firstName
   * …other params
   */</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">age</span><span class="p">,</span> <span class="nx">eyes</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">eyes</span> <span class="o">=</span> <span class="nx">eyes</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Создаем объекты</span>
<span class="kd">const</span> <span class="nx">myDad</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span>
<span class="err">  </span><span class="dl">'</span><span class="s1">Александр</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Никишин</span><span class="dl">'</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span><span class="p">,</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">myMum</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span>
<span class="err">  </span><span class="dl">'</span><span class="s1">Галина</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Никишина</span><span class="dl">'</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="dl">'</span><span class="s1">brown</span><span class="dl">'</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-40">Добавление свойств и методов в прототип предка</h4>

      <p>Свойства и методы экземплярам можно добавить, набрав названия экземпляра и свойства через точку. А если  обратиться похожим образом к предку, но добавив после его имени еще и свойство <code class="language-plaintext highlighter-rouge">prototype</code>, то можно изменить конструктор предка и все его экземпляры.</p>

      <p>⚠️ Однако расширять можно только пользовательские объекты и никогда встроенные.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">nationality</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Russian</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span>
<span class="err">  </span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-add-remove-methods-properties">
  <summary class="accordion__header">
    Добавление или удаление свойств и методов
  </summary>
  <div class="accordion__body">
      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Dog</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">breed</span><span class="p">,</span> <span class="nx">weight</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">breed</span> <span class="o">=</span> <span class="nx">breed</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">weight</span> <span class="o">=</span> <span class="nx">weight</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="nx">goodBoyReaction</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> wags its tail`</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Экземпляр класса Dog</span>
<span class="kd">const</span> <span class="nx">fido</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">(</span><span class="dl">'</span><span class="s1">Fido</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Mixed</span><span class="dl">'</span><span class="p">,</span> <span class="mi">38</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Объекту можно добавить свойство или метод, даже если они не созданы в классе. Можно удалить унаследованное.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fido</span><span class="p">.</span><span class="nx">bark</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Woof! Woof!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">fido</span><span class="p">.</span><span class="nx">owner</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Bob</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div>      </div>

      <p>Свойства могут быть удалены оператором delete. Методы удалить невозможно — экземпляр класса наследует все методы.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">delete</span> <span class="nx">fido</span><span class="p">.</span><span class="nx">weight</span><span class="p">;</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-define-property">
  <summary class="accordion__header">
    `Object.defineProperty` — изменение или добавление свойства
  </summary>
  <div class="accordion__body">
      <h4 id="section-41">Изменение или добавление свойства</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">language</span><span class="p">:</span> <span class="dl">'</span><span class="s1">EN</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span>
<span class="err">  </span><span class="nx">person</span><span class="p">,</span> <span class="dl">'</span><span class="s1">language</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">NO</span><span class="dl">'</span> <span class="p">}</span>
<span class="p">);</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span>
<span class="err">  </span><span class="nx">person</span><span class="p">,</span> <span class="dl">'</span><span class="s1">year</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="mi">2021</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-42">Изменение атрибутов свойств</h4>

      <p>Тот же метод <code class="language-plaintext highlighter-rouge">defineProperty</code> позволяет изменить атрибуты свойств, выбрав булево значение true или false.</p>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">writable</code> —  возможность записи</li>
        <li><code class="language-plaintext highlighter-rouge">enumerable</code> — возможность перечисления</li>
        <li><code class="language-plaintext highlighter-rouge">configurable</code> — возможность настройки</li>
      </ul>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span>
<span class="err">  </span><span class="nx">person</span><span class="p">,</span> <span class="dl">'</span><span class="s1">language</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">writable</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-43">Установка геттеров и сеттеров</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span> <span class="dl">'</span><span class="s1">fullName</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">get</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span> <span class="dl">'</span><span class="s1">age</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span> <span class="p">},</span>
<span class="p">});</span>
</code></pre></div>      </div>

      <h4 id="section-44">Добавление или изменение нескольких свойств</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span> <span class="p">{</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="p">{</span>
<span class="err">    </span><span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Nikishin</span><span class="dl">'</span><span class="p">,</span>
<span class="err">    </span><span class="na">writable</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="err">  </span><span class="p">},</span>
<span class="err">  </span><span class="na">language</span><span class="p">:</span> <span class="p">{</span>
<span class="err">    </span><span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">RU</span><span class="dl">'</span><span class="p">,</span>
<span class="err">    </span><span class="na">writable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">});</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-assign-copy-properties">
  <summary class="accordion__header">
    Метод `Object.assign()` — копирование свойств
  </summary>
  <div class="accordion__body">
      <p>Используется для копирования значений всех собственных перечисляемых свойств из одного или более объектов в целевой объект. Вложенные объекты копируются, как ссылки.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">dest</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">1</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">source1</span> <span class="o">=</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="mi">2</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">source2</span> <span class="o">=</span> <span class="p">{</span> <span class="na">c</span><span class="p">:</span> <span class="mi">3</span> <span class="p">};</span>

<span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span> <span class="nx">source1</span><span class="p">,</span> <span class="nx">source2</span><span class="p">);</span>

<span class="c1">// В консоль будет выведено { a: 1, b: 2, c: 3 }</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Также можно использовать для дублирования объекта. Однако предпочтительней для этих целей использовать <a href="/js/advanced-theory.html#topic-objects-joining-and-spread-operator">оператор расширения (spread-оператор)</a>.</p>
    </div>
</details>
<details class="accordion" id="topic-objects-built-in-methods">
  <summary class="accordion__header">
    Другие встроенные методы объекта
  </summary>
  <div class="accordion__body">
      <h4 id="getownpropertynames-----"><code class="language-plaintext highlighter-rouge">getOwnPropertyNames</code> — получение списка свойств объекта</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">language</span><span class="p">:</span> <span class="dl">'</span><span class="s1">EN</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">year</span><span class="p">:</span> <span class="mi">2021</span><span class="p">,</span>
<span class="err">  </span><span class="na">age</span><span class="p">:</span> <span class="mi">51</span><span class="p">,</span>

<span class="err">  </span><span class="kd">get</span> <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="err">  </span><span class="p">},</span>

<span class="p">};</span>

<span class="cm">/* Результатом примера будет массив
[ 'firstName', 'lastName', 'language', 'year',
'fullName', 'age' ] */</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">person</span><span class="p">));</span>
</code></pre></div>      </div>

      <h4 id="keys-------"><code class="language-plaintext highlighter-rouge">keys</code> — получение списка только перечисляемых свойств объекта</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Результатом примера будет массив
[ 'firstName',  'lastName', 'year', 'fullName', 'age' ] */</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span>
<span class="err">  </span><span class="nx">person</span><span class="p">,</span> <span class="dl">'</span><span class="s1">language</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">enumerable</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}</span>
<span class="p">);</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="getownpropertydescriptor-------"><code class="language-plaintext highlighter-rouge">getOwnPropertyDescriptor</code> — получение значения и атрибутов собственного свойства</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cm">/* Результатом примера будет
{ value: 'Vladimir', writable: true,
enumerable: true, configurable: true } */</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="err">  </span><span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span>
<span class="err">    </span><span class="nx">person</span><span class="p">,</span> <span class="dl">'</span><span class="s1">firstName</span><span class="dl">'</span>
<span class="err">  </span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="getprototypeof----"><code class="language-plaintext highlighter-rouge">getPrototypeOf</code> — доступ к прототипу</h4>

      <p>Возвращает прототип, то есть набор свойств и методов указанного объекта.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">person</span><span class="p">));</span>
</code></pre></div>      </div>

      <h4 id="preventextensions-----"><code class="language-plaintext highlighter-rouge">preventExtensions</code> — запрет добавления новых свойств</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="isextensible------"><code class="language-plaintext highlighter-rouge">isExtensible</code> — проверка возможности добавления новых свойств</h4>

      <p>Возвращает true, если можно добавлять новые свойства.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="seal------"><code class="language-plaintext highlighter-rouge">seal</code> — запрет изменения значений существующих свойств</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="issealed-------"><code class="language-plaintext highlighter-rouge">isSealed</code> — проверка возможности изменения значений существующих свойств</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="freeze-----"><code class="language-plaintext highlighter-rouge">freeze</code> — запрет любых изменений объекта</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="isfrozen-----"><code class="language-plaintext highlighter-rouge">isFrozen</code> — проверка возможности изменений объекта</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="jsonstringify--tostring----"><code class="language-plaintext highlighter-rouge">JSON.stringify</code> и <code class="language-plaintext highlighter-rouge">toString</code> — перевод в строку</h4>

      <p>Универсальный метод <code class="language-plaintext highlighter-rouge">toString</code> полезен для работы с массивами и числами, но для объектов практически непригоден.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Vladimir</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Nikishin</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* результатом применения метода будет строка
'[object Object]' */</span>
<span class="kd">const</span> <span class="nx">meAsObj</span> <span class="o">=</span> <span class="nx">person</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
</code></pre></div>      </div>

      <p>Вместо <code class="language-plaintext highlighter-rouge">toString</code> с объектами лучше использовать метод <code class="language-plaintext highlighter-rouge">JSON.stringify</code> или функции, отделяющие ключи и составляющие строки исключительно из значений.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* результатом применения метода будет строка
'{firstName: 'Vladimir', lastName: 'Nikishin'}' */</span>
<span class="kd">const</span> <span class="nx">iAm</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-add-to-array">
  <summary class="accordion__header">
    Добавление объекта в массив
  </summary>
  <div class="accordion__body">
      <p>Объект будет добавлен в конец списка.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">contacts</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">some</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">];</span>

<span class="nx">contacts</span><span class="p">[</span><span class="nx">contacts</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Vladimir</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Nikishin</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">phoneNumber</span><span class="p">:</span> <span class="dl">'</span><span class="s1">+791612345678</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">vladimir.nikishin@gmail.com</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-comparison">
  <summary class="accordion__header">
    Сравнение объектов
  </summary>
  <div class="accordion__body">
      <p>При сравнении объектов сравниваются ссылки на них, а не их содержимое.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myObj1</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Vladimir</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">age</span><span class="p">:</span> <span class="mi">51</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">myObj2</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Vladimir</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">age</span><span class="p">:</span> <span class="mi">51</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">myObj3</span> <span class="o">=</span> <span class="nx">myObj1</span><span class="p">;</span>
</code></pre></div>      </div>

      <p>Не важно, что хранится в этих объектах. Если переменные разные, и объекты будут считаться разными. Результат сравнения в примере — <code class="language-plaintext highlighter-rouge">false</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">myObj1</span> <span class="o">===</span> <span class="nx">myObj2</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</code></pre></div>      </div>

      <p>Две ссылки равны только в том случае, если они ссылаются на один объект. В примере <code class="language-plaintext highlighter-rouge">myObj3</code> ссылается на тот же объект, что и <code class="language-plaintext highlighter-rouge">myObj1</code>. Результат сравнения — <code class="language-plaintext highlighter-rouge">true</code></p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">myObj1</span> <span class="o">===</span> <span class="nx">myObj3</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-destructuring">
  <summary class="accordion__header">
    Деструктурирующее присваивание или просто деструктуризация
  </summary>
  <div class="accordion__body">
      <p>См. также <a href="/js/advanced-theory.html#topic-functions-parameters-destructuring">деструктуризацию в параметрах</a></p>

      <p>Деструктуризация – это особый синтаксис присваивания, при котором можно присвоить нескольким переменным свойства объекта или элементы массива.</p>

      <p>Деструктуризация</p>

      <ul>
        <li>упрощает получение свойств из объектов;</li>
        <li>поддерживает вложенность и значения по умолчанию;</li>
        <li>поддерживает остаточные свойства (rest-элемент);</li>
        <li><a href="/js/advanced-theory.html#topic-functions-parameters-destructuring">работает с параметрами функций</a>.</li>
      </ul>

      <h4 id="section-45">Базовый синтаксис для объектов</h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// создаем переменные из свойств объекта gulp</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">gulp</span><span class="p">;</span>

<span class="c1">//... или</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">var1</span><span class="p">,</span> <span class="nx">var2</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{</span> <span class="na">var1</span><span class="p">:</span> <span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">,</span> <span class="na">var2</span><span class="p">:</span> <span class="mi">2</span> <span class="p">};</span>
</code></pre></div>      </div>

      <p>Объект справа – уже существующий, который мы хотим разбить на переменные. А слева – список переменных, в которые нужно соответствующие свойства записать. Таким образом мы явным образом указываем, какие свойства в какие переменные должны быть сохранены. Пример.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Меню</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="err">  </span><span class="na">height</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span> <span class="c1">// Меню</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">width</span><span class="p">);</span> <span class="c1">// 100</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">height</span><span class="p">);</span> <span class="c1">// 200</span>
</code></pre></div>      </div>

      <p>Свойства <code class="language-plaintext highlighter-rouge">options.title</code>, <code class="language-plaintext highlighter-rouge">options.width</code> и <code class="language-plaintext highlighter-rouge">options.height</code> были присвоены соответствующим переменным.</p>

      <p>Если хочется присвоить свойство объекта в переменную с другим именем, например, чтобы свойство <code class="language-plaintext highlighter-rouge">options.width</code> пошло в переменную <code class="language-plaintext highlighter-rouge">w</code>, то можно указать соответствие через двоеточие, вот так:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Меню</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="err">  </span><span class="na">height</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="nx">w</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="nx">h</span><span class="p">,</span> <span class="nx">title</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span> <span class="c1">// Меню</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">w</span><span class="p">);</span> <span class="c1">// 100</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">h</span><span class="p">);</span> <span class="c1">// 200</span>
</code></pre></div>      </div>

      <p>В примере выше свойство <code class="language-plaintext highlighter-rouge">width</code> отправилось в переменную <code class="language-plaintext highlighter-rouge">w</code>, свойство <code class="language-plaintext highlighter-rouge">height</code> – в переменную <code class="language-plaintext highlighter-rouge">h</code>, а <code class="language-plaintext highlighter-rouge">title</code> – в переменную с тем же названием.</p>

      <h4 id="section-46">Значения по умолчанию</h4>

      <p>Если каких-то свойств в объекте нет, можно указать значение по умолчанию через знак равенства <code class="language-plaintext highlighter-rouge">=</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Меню</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">width</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">height</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="nx">title</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span> <span class="c1">// Меню</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">width</span><span class="p">);</span> <span class="c1">// 100</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">height</span><span class="p">);</span> <span class="c1">// 200</span>
</code></pre></div>      </div>

      <p>Можно и сочетать одновременно двоеточие и равенство, чтобы одновременно изменить наследуемое имя и значение:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Меню</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="nx">w</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="nx">h</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="nx">title</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span> <span class="c1">// Меню</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">w</span><span class="p">);</span> <span class="c1">// 100</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">h</span><span class="p">);</span> <span class="c1">// 200</span>
</code></pre></div>      </div>

      <p>Значениями по умолчанию могут быть любые выражения или даже функции. Они выполнятся, если значения отсутствуют.</p>

      <p>В коде ниже <code class="language-plaintext highlighter-rouge">prompt</code> запросит <code class="language-plaintext highlighter-rouge">width</code>, но не <code class="language-plaintext highlighter-rouge">title</code>:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Menu</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="dl">'</span><span class="s1">width?</span><span class="dl">'</span><span class="p">),</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="dl">'</span><span class="s1">title?</span><span class="dl">'</span><span class="p">)</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span> <span class="c1">// Menu</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">width</span><span class="p">);</span> <span class="c1">// (результат prompt)</span>
</code></pre></div>      </div>

      <h4 id="section-47">Необязательно сохранять все свойства в переменные</h4>

      <p>Если у нас есть большой объект с множеством свойств, можно взять только то, что нужно:</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Menu</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="err">  </span><span class="na">height</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// взять только title, игнорировать остальное</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">title</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span> <span class="c1">// Menu</span>

<span class="c1">// импортировать только src и dest, игнорировать остальное</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gulp</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div>      </div>

      <h4 id="rest--1">«Остаток» объекта (остаточные свойства, rest-элемент)</h4>

      <p>В случаях, когда свойств больше, чем переменных, «остаток» можно сохранить с помощью spread-оператора.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Menu</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">height</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
<span class="err">  </span><span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// title = свойство с именем title</span>
<span class="c1">// rest = объект с остальными свойствами</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">title</span><span class="p">,</span> <span class="p">...</span><span class="nx">rest</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>

<span class="c1">// сейчас title="Menu",</span>
<span class="c1">// rest={height: 200, width: 100}</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">rest</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span> <span class="c1">// 200</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">rest</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span> <span class="c1">// 100</span>
</code></pre></div>      </div>

      <h4 id="section-48">Вложенная деструктуризация</h4>

      <p>Деструктурировать можно и вложенные объекты.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">name</span><span class="p">:</span> <span class="p">{</span>
<span class="err">    </span><span class="na">first</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Vladimir</span><span class="dl">'</span><span class="p">,</span>
<span class="err">    </span><span class="na">last</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Nikishin</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="p">},</span>
<span class="err">  </span><span class="na">age</span><span class="p">:</span> <span class="mi">51</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="p">{</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">last</span> <span class="p">}</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">person</span><span class="p">;</span>
</code></pre></div>      </div>

      <p>Умные параметры функций — <a href="https://learn.javascript.ru/destructuring-assignment">см. в справочнике</a>.</p>
    </div>
</details>
<details class="accordion" id="topic-objects-joining-and-spread-operator">
  <summary class="accordion__header">
    Объединение объектов
  </summary>
  <div class="accordion__body">
      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Есть два объекта</span>
<span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Vladimir Nikishin</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">gender</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Male</span><span class="dl">'</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">tools</span> <span class="o">=</span> <span class="p">{</span> <span class="na">computer</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Mac</span><span class="dl">'</span><span class="p">,</span> <span class="na">editor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">VS Code</span><span class="dl">'</span> <span class="p">};</span>
</code></pre></div>      </div>

      <p>Создадим новый объект, который унаследует свойства предшественников. Используем <strong>оператор расширения</strong> <code class="language-plaintext highlighter-rouge">...</code></p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">summary</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">person</span><span class="p">,</span> <span class="p">...</span><span class="nx">tools</span> <span class="p">};</span>
</code></pre></div>      </div>

      <p>В результате объект <code class="language-plaintext highlighter-rouge">summary</code> наследует содержание (свойства) двух предков.</p>

      <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="err">  </span><span class="nl">"computer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mac"</span><span class="p">,</span><span class="w">
</span><span class="err">  </span><span class="nl">"editor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VSCode"</span><span class="p">,</span><span class="w">
</span><span class="err">  </span><span class="nl">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w">
</span><span class="err">  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vladimir Nikishin"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>      </div>

      <p>Тем же манером можно сделать копию только одного объекта.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">shallowCopy</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">person</span> <span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-49">Комбинированный синтаксис создания объектов</h4>

      <p>Spread-оператор можно комбинировать с любым другим синтаксисом создания объектов.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span> <span class="na">host</span><span class="p">:</span> <span class="dl">'</span><span class="s1">localhost</span><span class="dl">'</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">preferences</span> <span class="o">=</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="dl">'</span><span class="s1">root</span><span class="dl">'</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="p">...</span><span class="nx">defaults</span><span class="p">,</span>
<span class="err">  </span><span class="p">...</span><span class="nx">preferences</span><span class="p">,</span>
<span class="err">  </span><span class="nx">port</span><span class="p">,</span>
<span class="err">  </span><span class="nx">connect</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="c1">// some method</span>
<span class="err">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="objectassign"><code class="language-plaintext highlighter-rouge">Object.assign</code></h4>

      <p>Тех же результатов можно достичь с помощью метода <code class="language-plaintext highlighter-rouge">[Object.assign](/js/advanced-theory.html#topic-objects-assign-copy-properties)</code>, но с оператором расширения операция получается лаконичней и изящней.</p>
    </div>
</details>
<details class="accordion" id="topic-objects-getters-setters">
  <summary class="accordion__header">
    Аксессоры: «геттеры» и «сеттеры»
  </summary>
  <div class="accordion__body">
      <p>Есть два типа свойств объекта.</p>

      <p>Первый тип это стандартые свойства-данные (data properties) — пары «ключ: значение».</p>

      <p>Второй тип свойств — аксессоры (accessor properties). По сути это функции, которые используются для присвоения и получения значения, но во внешнем коде вызываются через точечную нотацию — как обычные свойства объекта.</p>

      <p>Конечно, чтение и изменение свойств объектов возможно и без акссесоров. Но они позволяют программно обрабатывать входные данные, что даёт, минимум, два преимущества перед свойствами-данными.</p>

      <ul>
        <li>Аксессоры позволяют избегать дублирования данных. Например, когда в объекте или классе уже есть свойства <code class="language-plaintext highlighter-rouge">firstName</code>и <code class="language-plaintext highlighter-rouge">lastName</code>, а нужно еще и <code class="language-plaintext highlighter-rouge">fullName</code>.</li>
        <li>Позволяют проверять входные данные и контролировать вывод данных — например, в верхнем регистре.</li>
      </ul>

      <p>Впрочем, там где логика для доступа и изменения свойств не нужна, конечно, не нужно усложнять программу и обходиться свойствами-данными.</p>

      <h4 id="section-50">Синтаксис</h4>

      <p>Для создания свойств-аксессоров в современном JS предусмотрены ключевые слова <code class="language-plaintext highlighter-rouge">get</code> и <code class="language-plaintext highlighter-rouge">set</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">firstName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">lastName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">language</span><span class="p">:</span> <span class="dl">'</span><span class="s1">en</span><span class="dl">'</span><span class="p">,</span>

<span class="err">  </span><span class="c1">// Сеттер</span>
<span class="err">  </span><span class="kd">set</span> <span class="nx">name</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="kd">const</span> <span class="nx">split</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span>
    <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">split</span><span class="p">;</span>
<span class="err">  </span><span class="p">},</span>

<span class="err">  </span><span class="c1">// Геттер</span>
<span class="err">  </span><span class="kd">get</span> <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="err">  </span><span class="p">},</span>

<span class="err">  </span><span class="cm">/* В принципе, геттер можно заменить вот таким
  методом. Но так никто не делает — дурной тон */</span>
<span class="err">  </span><span class="na">fullNameOnceAgain</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span>
<span class="err">    </span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p>Геттер срабатывает, когда <code class="language-plaintext highlighter-rouge">obj.propName</code> читается, сеттер – когда значение присваивается.</p>

      <h4 id="section-51">Сеттер</h4>

      <p>Обычно создает новое свойство на основе полученного аргумента (<code class="language-plaintext highlighter-rouge">set</code> должен иметь ровно один параметр).</p>

      <p>В примере сеттер принимает строку, разделяет ее по пробелу и сохраняет первый фрагмент <code class="language-plaintext highlighter-rouge">firstName</code>, а второй — в <code class="language-plaintext highlighter-rouge">lastName</code>.</p>

      <p>Сеттеры используются чаще всего в сочетании с геттерами.</p>

      <h4 id="section-52">Геттер</h4>

      <p>В примере геттер возвращает псевдо-свойство <code class="language-plaintext highlighter-rouge">fullName</code>.</p>

      <p>⚠️ Кстати, геттер не может иметь параметров.</p>

      <p><strong>Изменение свойств</strong> <code class="language-plaintext highlighter-rouge">firstName</code> и <code class="language-plaintext highlighter-rouge">lastName</code> с помощью сеттера <code class="language-plaintext highlighter-rouge">name</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Владимир Никишин</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">firstName</span><span class="p">);</span> <span class="c1">// Владимир</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">lastName</span><span class="p">);</span> <span class="c1">// Никишин</span>
</code></pre></div>      </div>

      <p><strong>Доступ</strong> к полному имени с помощью геттера.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">fullName</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">fullName</span><span class="p">);</span>
</code></pre></div>      </div>

      <p><strong>Доступ</strong> к полному имени с помощью метода fullNameOnceAgain — со скобками</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">fullNameOnceAgain</span><span class="p">());</span>
</code></pre></div>      </div>

      <h4 id="objectdefineproperty">Добавление геттеров и сеттеров в существующий объект — <code class="language-plaintext highlighter-rouge">Object.defineProperty()</code></h4>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myObj</span> <span class="o">=</span> <span class="p">{</span> <span class="na">counter</span><span class="p">:</span> <span class="mi">0</span> <span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">myObj</span><span class="p">,</span> <span class="dl">'</span><span class="s1">reset</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">get</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">},</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">myObj</span><span class="p">,</span> <span class="dl">'</span><span class="s1">increment</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">get</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">},</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">myObj</span><span class="p">,</span> <span class="dl">'</span><span class="s1">decrement</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">get</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">},</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">myObj</span><span class="p">,</span> <span class="dl">'</span><span class="s1">add</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+=</span> <span class="nx">value</span><span class="p">;</span> <span class="p">},</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">myObj</span><span class="p">,</span> <span class="dl">'</span><span class="s1">subtract</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">-=</span> <span class="nx">value</span><span class="p">;</span> <span class="p">},</span>
<span class="p">});</span>
</code></pre></div>      </div>

      <p>Вызовы геттеров и сеттеров объекта изменяют показания счетчика</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myObj</span><span class="p">.</span><span class="nx">reset</span><span class="p">;</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">subtract</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">increment</span><span class="p">;</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">decrement</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myObj</span><span class="p">.</span><span class="nx">counter</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-objects-using-in-functions">
  <summary class="accordion__header">
    Передача объектов в функции — в качестве аргументов
  </summary>
  <div class="accordion__body">
      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Объявляем функцию</span>
<span class="kd">const</span> <span class="nx">ageDifference</span> <span class="o">=</span> <span class="p">(</span><span class="nx">person1</span><span class="p">,</span> <span class="nx">person2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">person1</span><span class="p">.</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">person2</span><span class="p">.</span><span class="nx">age</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**
 * Создаем класс
 */</span>
<span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
<span class="err">  </span><span class="cm">/**
   * @param {string} name
   * @param {number} age
   */</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Создаем объекты</span>
<span class="kd">const</span> <span class="nx">alice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">Alice</span><span class="dl">'</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">billy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">Billy</span><span class="dl">'</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>

<span class="cm">/* Объявляем переменную diff и передаем ей значение
функции ageDifference */</span>
<span class="kd">const</span> <span class="nx">diff</span> <span class="o">=</span> <span class="nx">ageDifference</span><span class="p">(</span><span class="nx">alice</span><span class="p">,</span> <span class="nx">billy</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
</section>

<section>
  <h2>Встроенные объекты и глобальные свойства и методы</h2><details class="accordion" id="topic-built-in-objects">
  <summary class="accordion__header">
    Встроенные объекты
  </summary>
  <div class="accordion__body">
      <p>В JavaScript есть стандартные встроенные объекты, доступные из любой точки программы: <code class="language-plaintext highlighter-rouge">Date</code>, <code class="language-plaintext highlighter-rouge">Array</code>, <code class="language-plaintext highlighter-rouge">Object</code> и др. Их пользовательские экземпляры наследуют методы и свойства.</p>

      <p>Создаем свой объект на основе встроенного объекта <code class="language-plaintext highlighter-rouge">Date</code>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">now</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
</code></pre></div>      </div>

      <p>Используем методы встроенного в своем экземпляре.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">theYear</span> <span class="o">=</span> <span class="nx">now</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
</code></pre></div>      </div>

      <p>Создаем еще один объект на основе встроенного, передаем ему строку</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">birthday</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">May 1, 1983</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>⛔️ Встроенные объекты, в принципе, можно расширять, добавляя свойства и методы через свойство <code class="language-plaintext highlighter-rouge">prototype</code>, но не рекомендуется (eslint no-extend-native).</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">cliche</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">cliche</span> <span class="o">=</span> <span class="p">[</span>
<span class="err">    </span><span class="dl">'</span><span class="s1">lock and load</span><span class="dl">'</span><span class="p">,</span>
<span class="err">    </span><span class="dl">'</span><span class="s1">touch base</span><span class="dl">'</span><span class="p">,</span>
<span class="err">    </span><span class="dl">'</span><span class="s1">open the kimono</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="p">];</span>
<span class="err">  </span><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">cliche</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">cliche</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="err">    </span><span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="err">      </span><span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="err">    </span><span class="p">}</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-53">Фундаментальные объекты</h4>

      <p>Общие языковые объекты, функции и ошибки.</p>

      <ul>
        <li>Object</li>
        <li>Function</li>
        <li>Boolean</li>
        <li>Symbol</li>
        <li>Error</li>
        <li>EvalError</li>
        <li>InternalError</li>
        <li>RangeError</li>
        <li>ReferenceError</li>
        <li>SyntaxError</li>
        <li>TypeError</li>
        <li>URIError</li>
      </ul>

      <h4 id="number"><code class="language-plaintext highlighter-rouge">Number</code></h4>

      <p>Является объектом-обёрткой, позволяющей  работать с числовыми значениями.</p>

      <p>Создаётся через конструктор Number(). Приводит значение к числовому типу. Если это невозможно, возвращает <code class="language-plaintext highlighter-rouge">NaN</code>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="err"> </span><span class="s2">`</span><span class="p">${</span><span class="nb">Number</span><span class="p">(</span><span class="kc">true</span><span class="p">)}</span><span class="s2">
  </span><span class="p">${</span><span class="nb">Number</span><span class="p">(</span><span class="kc">false</span><span class="p">)}</span><span class="s2">
  </span><span class="p">${</span><span class="nb">Number</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">())}</span><span class="s2">
  </span><span class="p">${</span><span class="nb">Number</span><span class="p">(</span><span class="dl">'</span><span class="s1">999</span><span class="dl">'</span><span class="p">)}</span><span class="s2">
  </span><span class="p">${</span><span class="nb">Number</span><span class="p">(</span><span class="dl">'</span><span class="s1">999 888</span><span class="dl">'</span><span class="p">)}</span><span class="s2">`</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="string"><code class="language-plaintext highlighter-rouge">String</code></h4>

      <p>Используется, чтобы представить и конструировать последовательность символов.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nb">Boolean</span><span class="p">(</span><span class="mi">0</span><span class="p">)));</span> <span class="c1">// Вернет false</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nb">Boolean</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span> <span class="c1">// True</span>
<span class="c1">// Sun Feb 03 2019 11:06:45 GMT+0100 (CET)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">12345</span><span class="dl">'</span><span class="p">));</span> <span class="c1">// 12345, как строка</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="mi">12345</span><span class="p">));</span> <span class="c1">// 12345, как строка</span>
</code></pre></div>      </div>

      <h4 id="section-54">Другие</h4>

      <ul>
        <li><a href="/js/advanced-theory.html#topic-built-in-math">Math</a></li>
        <li><a href="/js/advanced-theory.html#topic-built-in-date">Date</a></li>
        <li>RegExp</li>
        <li>Array</li>
        <li>Map</li>
        <li>JSON</li>
        <li>Promise</li>
      </ul>
    </div>
</details>
<details class="accordion" id="topic-built-in-global">
  <summary class="accordion__header">
    Глобальные свойства и методы JS
  </summary>
  <div class="accordion__body">
      <p>Глобальные свойства и методы JS могут быть использованы с любым объектом программы.</p>

      <h4 id="section-55">Глобальные свойства, возвращающие простое значение</h4>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">NaN</code> — значение <a href="/js/advanced-theory.html#topic-built-in-nan">Not-a-Number</a></li>
        <li><code class="language-plaintext highlighter-rouge">Infinity</code> — значение, представляющее положительную бесконечность. <code class="language-plaintext highlighter-rouge">-Infinity</code> — значение, представляющее отрицательную бесконечность. Хотя тип <code class="language-plaintext highlighter-rouge">Infinity</code> числовой в коде свойство используется, как слово.</li>
        <li><code class="language-plaintext highlighter-rouge">undefined</code> — свойство возвращается когда, переменная не инициализирована (т. е. ей не присвоено значение) или свойство объекта, элемент массива отсутствуют.</li>
        <li>литерал <code class="language-plaintext highlighter-rouge">null</code>.</li>
      </ul>

      <h4 id="section-56">Функции</h4>

      <p>Традиционно методы глобального объекта называют глобальными функциями.</p>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">encodeURIComponent</code>/<code class="language-plaintext highlighter-rouge">decodeURIComponent()</code> и <code class="language-plaintext highlighter-rouge">decodeURI()</code>/<code class="language-plaintext highlighter-rouge">encodeURI()</code></li>
        <li><code class="language-plaintext highlighter-rouge">parseInt()</code></li>
        <li><code class="language-plaintext highlighter-rouge">parseFloat()</code></li>
        <li><code class="language-plaintext highlighter-rouge">isFinite()</code></li>
      </ul>

      <h4 id="encodeuricomponentdecodeuricomponent--decodeuriencodeuri"><code class="language-plaintext highlighter-rouge">encodeURIComponent</code>/<code class="language-plaintext highlighter-rouge">decodeURIComponent()</code> и <code class="language-plaintext highlighter-rouge">decodeURI()</code>/<code class="language-plaintext highlighter-rouge">encodeURI()</code></h4>

      <p>Кодируют и декодируют строки согласно стандарту веб-адресов. Превращая, например, пробел в управляющую последовательность <code class="language-plaintext highlighter-rouge">%20</code> и обратно.</p>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">decodeURI()</code>/<code class="language-plaintext highlighter-rouge">encodeURI()</code> предназначены для использования в полном URI. Поэтому <code class="language-plaintext highlighter-rouge">encodeURI()</code> не кодирует стандартные спецсимволы, используемые в веб-адресах: <code class="language-plaintext highlighter-rouge">; / ? : @ &amp; = + $ , #</code>.</li>
        <li><code class="language-plaintext highlighter-rouge">encodeURIComponent</code>/<code class="language-plaintext highlighter-rouge">decodeURIComponent()</code> предназначены для использования на частях URI, которая лежит между разделителями <code class="language-plaintext highlighter-rouge">;/?: @и = + $, #</code>. В отличие от <code class="language-plaintext highlighter-rouge">encodeURI</code> <code class="language-plaintext highlighter-rouge">encodeURIComponent</code> кодирует всё.</li>
      </ul>

      <p>Результатом применения <code class="language-plaintext highlighter-rouge">encodeURI()</code> в примере будет
<code class="language-plaintext highlighter-rouge">https://w3schools.com/my%20test.asp?name=st%C3%A5le&amp;car=saab</code></p>

      <p>… А результатом применения encodeURIComponent —
<code class="language-plaintext highlighter-rouge">https%3A%2F%2Fw3schools.com%2Fmy%20test.asp%3Fname%3Dst%C3%A5le%26car%3Dsaab</code>
То есть все двоеточия, слеши и пр. будут закодированы.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">uri</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">my test.asp?name=ståle&amp;car=saab</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">enc</span> <span class="o">=</span> <span class="nb">encodeURI</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">encComp</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">dec</span> <span class="o">=</span> <span class="nb">decodeURI</span><span class="p">(</span><span class="nx">enc</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">decComp</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">encComp</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="parseint"><code class="language-plaintext highlighter-rouge">parseInt()</code></h4>

      <p>Извлекает из строки первое целое число, если строка начинается с цифры или пробела. Вторым параметром, указывается основа <a href="https://ru.wikipedia.org/wiki/Система_счисления">система счисления</a>, так называемый <em>radix</em> — целое число в диапазоне между 2 и 36.</p>

      <p>☝️🧐 В большинстве случаев система десятичная, <code class="language-plaintext highlighter-rouge">b 10</code> — это значение redix’a по умолчанию. Но все равно всегда следует его указывать, чтобы исключить ошибки считывания.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Вернет 10, как число</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">10</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">10.00</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span> <span class="c1">// 10</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">10.33</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span> <span class="c1">// 10</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">34 45 66</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span> <span class="c1">// 34</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">   60   </span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span> <span class="c1">// 60</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">40 years</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span> <span class="c1">// 40</span>

<span class="c1">// В этом случае вернет NaN, т.к. строка</span>
<span class="c1">// начинается ни с пробела, и ни с числа</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">He was 40</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">010</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span> <span class="c1">// 10</span>
</code></pre></div>      </div>

      <p><code class="language-plaintext highlighter-rouge">parseInt()</code> не рекомендуется использовать с двоичной, восьмеричной и шестнадцатеричной системами. Вместо этого <a href="https://ravesli.com/urok-36-literaly-magicheskie-chisla/">использовать числовые литералы</a>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">10</span><span class="dl">'</span><span class="p">,</span> <span class="mi">16</span><span class="p">));</span> <span class="c1">// 16</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="dl">'</span><span class="s1">0x10</span><span class="dl">'</span><span class="p">,</span> <span class="mi">16</span><span class="p">));</span> <span class="c1">// 16</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mh">0x10</span><span class="p">);</span> <span class="c1">// 16</span>
</code></pre></div>      </div>

      <h4 id="parsefloat"><code class="language-plaintext highlighter-rouge">parseFloat()</code></h4>

      <p>Извлекает из строки первое десятичное число, если строка начинается с цифры или пробела.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Вернет 48.3, как число</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="dl">'</span><span class="s1">48.3</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="dl">'</span><span class="s1">  4</span><span class="dl">'</span><span class="p">));</span> <span class="c1">// 4</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="dl">'</span><span class="s1">He is 48</span><span class="dl">'</span><span class="p">));</span> <span class="c1">// NaN</span>
</code></pre></div>      </div>

      <h4 id="isfinite"><code class="language-plaintext highlighter-rouge">isFinite()</code></h4>

      <p>Определяет, является ли переданное значение конечным числом. Если необходимо, параметр сначала преобразуется в число.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Результат проверки — false</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="kc">Infinity</span><span class="p">);</span>

<span class="c1">// false</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="kc">NaN</span><span class="p">);</span>

<span class="c1">// false</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="o">-</span><span class="kc">Infinity</span><span class="p">);</span>

<span class="c1">// true</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="c1">// true</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="mi">2</span><span class="nx">e64</span><span class="p">);</span>

<span class="c1">// true, но было бы false если использовать более</span>
<span class="c1">// надежный вариант проверки Number.isFinite('0')</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-built-in-date">
  <summary class="accordion__header">
    Объект `Date`
  </summary>
  <div class="accordion__body">
      <p>С помощью этого объекта можно создать экземпляр, содержащий дату и время. Если никаких аргументов передано не было, конструктор создаёт объект <code class="language-plaintext highlighter-rouge">Date</code> для текущих даты и времени, согласно системным настройкам.</p>

      <h4 id="constructor">Свойство <code class="language-plaintext highlighter-rouge">constructor</code></h4>

      <p>Свойство всех встроенных объектов, содержит функцию-конструктор, которая, в свою очередь, создает новый экземпляр.</p>

      <p>Вызывается с помощью ключевого слова <code class="language-plaintext highlighter-rouge">new</code>. В параметрах можно указать нужную дату и формат.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
</code></pre></div>      </div>

      <p>JS автоматически конвертирует объект в строку при любой операции. Поэтому в примере ниже в HTML будет передана одинаковая строка с указанием часового пояса.
На момент конспектирования это было ‘Fri Feb 08 2019 10:45:14 GMT+0100 (CET)’</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">demo</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">demo</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
</code></pre></div>      </div>

      <p>☝️🧐 При выводе переменной <code class="language-plaintext highlighter-rouge">d</code> из примера в консоль, получим дату в формате браузера (в примерах — формат консоли VSCode)
<code class="language-plaintext highlighter-rouge">1995-12-17T02:24:00.000Z</code></p>

      <p>В консоли Chrom’а таже дата будет выведена, как
<code class="language-plaintext highlighter-rouge">Sun Dec 17 1995 03:24:00 GMT+0100 (Центральная Европа, стандартное время)</code></p>

      <p>☝️🧐 Если при создании экземпляра <code class="language-plaintext highlighter-rouge">Date()</code> в параметры передается больше одного аргумента, данные интерпретируются как локальное время.</p>

      <p>☝️🧐 Объект, созданный с помощью конструктора <code class="language-plaintext highlighter-rouge">Date</code> статичный. <strong>Время в нем не меняется</strong> вместе с компьютерными часами.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Дата и время</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">December 17, 1995 03:24:00</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Запись дня и месяца может быть европейской</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">15 February 2019"</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Месяц может быть записан аббревиатурой</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">15 Feb 2019"</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Только дата в предпочтительном ISO-формате</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">2019-02-28</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Вместо дефисов можно использовать слеши</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">2019/02/28</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Дата и время в ISO-формате</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">1995-12-17T03:24:00</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// Дата и время по Гривичу</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">2015-03-25T12:00:00Z</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Чтобы создать объект даты-времени <strong>по часовому поясу, отличному от Гринвича</strong> и часового пояса системы, надо отнять или добавить разницу к времени по Гринвичу в формате GMT +/- HHMM. Окончание Z (время по Гринвичу) перед арифметическим символом ставить не нужно.</p>

      <p>В примере добавляется один час — создается дата в центральноевропейском времени.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">'</span><span class="s1">2019-02-15T18:26:31+01:00</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span> <span class="c1">// Снова — текущая дата и время</span>
</code></pre></div>      </div>

      <p>Можно указать от двух до шести параметров через запятую: год, месяц, день, часы, минуты, секунды, миллисекунды. При попытке указать только год, цифра будет рассчитана, как миллисекунды и будет добавлена к 1 января 1970-го.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Дата и время без миллисекунд</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">1995</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">1995</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">);</span> <span class="c1">// Только дата</span>
</code></pre></div>      </div>

      <p>Можно задавать дату в миллисекундах — цифра будет прибавлена или вычтена из 1 января 1970-го.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="o">-</span><span class="mi">100000000000</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="prototype">Свойство <code class="language-plaintext highlighter-rouge">prototype</code></h4>

      <p>Свойство всех объектов — в том, числе встроенных — содержит все остальные свойства и методы, передаваемые по наследству.</p>

      <p>⛔️ Однако использовать это свойство встроенных объектов опасно и не рекомендуется.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// eslint-disable-next-line no-extend-native</span>
<span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">myMet</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">myProp</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">January</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">myProp</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">February</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="c1">// etc</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <h4 id="section-57">Базовые методы получения даты и времени</h4>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">getDate()</code>. Возвращает день месяца: с 1-го по 31-й</li>
        <li><code class="language-plaintext highlighter-rouge">getDay()</code>. День недели: с 0 (воскресенье) по 6-й</li>
        <li><code class="language-plaintext highlighter-rouge">getMonth()</code>. Месяц: с 0 (январь) по 11</li>
        <li><code class="language-plaintext highlighter-rouge">getFullYear()</code>. Год — четырехзначное число</li>
        <li><code class="language-plaintext highlighter-rouge">getHours()</code>. Час: 0-23</li>
        <li><code class="language-plaintext highlighter-rouge">getMinutes()</code>. Минуты: 0-59</li>
        <li><code class="language-plaintext highlighter-rouge">getSeconds()</code>. Секунды: 0-59</li>
        <li><code class="language-plaintext highlighter-rouge">getMilliseconds()</code>. Миллисекунды: 0-999</li>
      </ul>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span> <span class="c1">// 6 февраля вернул 6</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span> <span class="c1">// 6 февраля, в среду вернул 3</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span> <span class="c1">// 6 февраля вернул 1</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span> <span class="c1">// 06.02.2019 вернул 2019</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span> <span class="c1">// В 12:16 вернул 12</span>
</code></pre></div>      </div>

      <h4 id="section-58">То же самое по Гринвичу</h4>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">getUTCDate()</code>. День месяца: с 1-го по 31-й</li>
        <li><code class="language-plaintext highlighter-rouge">getUTCDay()</code>. День недели: с 0 по 6-й</li>
        <li><code class="language-plaintext highlighter-rouge">getUTCFullYear()</code>. Год — четырехзначное число</li>
        <li><code class="language-plaintext highlighter-rouge">getUTCHours()</code>. Час: 0-23</li>
        <li><code class="language-plaintext highlighter-rouge">getUTCMilliseconds()</code>. Возвращает the milliseconds, according to universal time (from 0-999)</li>
        <li><code class="language-plaintext highlighter-rouge">getUTCMinutes()</code>. Возвращает the minutes, according to universal time (from 0-59)</li>
        <li><code class="language-plaintext highlighter-rouge">getUTCMonth()</code>. Возвращает the month, according to universal time (from 0-11)</li>
        <li><code class="language-plaintext highlighter-rouge">getUTCSeconds()</code>. Возвращает the seconds, according to universal time (from 0-59)</li>
      </ul>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">d</span><span class="p">.</span><span class="nx">getUTCHours</span><span class="p">();</span> <span class="c1">// В 12:17, в ЧГ вернул 11</span>
</code></pre></div>      </div>

      <h4 id="gettimezoneoffset">Метод <code class="language-plaintext highlighter-rouge">getTimezoneOffset()</code></h4>

      <p>Возвращает разницу между временем по Гринвичу и местным временем в минутах</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">d</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">();</span> <span class="c1">// В ЧГ вернул -60 (минут)</span>
</code></pre></div>      </div>

      <h4 id="section-59">Время с полночи первого января 1970 до указанной даты</h4>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">getTime()</code>. Возвращает миллисекунды</li>
        <li><code class="language-plaintext highlighter-rouge">now()</code>. То же самое с использованием объета Date</li>
        <li><code class="language-plaintext highlighter-rouge">valueOf()</code>. То же самое (метод общий для всех потомков Object)</li>
        <li><code class="language-plaintext highlighter-rouge">UTC()</code>. То же самое по Гринвичу</li>
        <li><code class="language-plaintext highlighter-rouge">parse()</code>. Возвращает время до указанной даты</li>
      </ul>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">// 6 февраля 2019 в 12:21 вернул 1549452065468</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>

 <span class="c1">// 6 февраля 2019 в 12:25 вернул 1549452314657</span>
<span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
<span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">October 31, 1970</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 26175600000</span>
</code></pre></div>      </div>

      <h4 id="section-60">Базовые методы установки даты и времени</h4>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">setDate()</code>. Установка дня месяца в объекте даты</li>
        <li><code class="language-plaintext highlighter-rouge">setTime()</code>. Установка даты в миллисекундах относительно полуночи 01.01.1970</li>
        <li><code class="language-plaintext highlighter-rouge">setMonth()</code>. Месяц</li>
        <li><code class="language-plaintext highlighter-rouge">setFullYear()</code>. Год</li>
        <li><code class="language-plaintext highlighter-rouge">setHours()</code>. Час</li>
        <li><code class="language-plaintext highlighter-rouge">setMinutes()</code>. Минуты</li>
        <li><code class="language-plaintext highlighter-rouge">setSeconds()</code>. Секунды</li>
        <li><code class="language-plaintext highlighter-rouge">setMilliseconds()</code>. Миллискекунды</li>
      </ul>

      <p>Если вывести в консоль, получим дату и время в формате браузера. Например, 2019-02-15T09:38:01.511Z</p>

      <p>☝️🧐 Z после времени означает, что дата и время показаны по Гринвичу</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">d</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>

<span class="c1">// 2043-11-29T09:58:02.588Z</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="mi">2332403882588</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-61">Тоже самое по Гринвичу</h4>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">setUTCDate()</code>. День месяца</li>
        <li><code class="language-plaintext highlighter-rouge">setUTCMonth()</code>. Месяц</li>
        <li><code class="language-plaintext highlighter-rouge">setUTCFullYear()</code>. Год</li>
        <li><code class="language-plaintext highlighter-rouge">setUTCHours()</code>. Час</li>
        <li><code class="language-plaintext highlighter-rouge">setUTCMinutes()</code>. Минуты</li>
        <li><code class="language-plaintext highlighter-rouge">setUTCSeconds()</code>. Секунды</li>
        <li><code class="language-plaintext highlighter-rouge">setUTCMilliseconds()</code>. Миллискекунды</li>
      </ul>

      <h4 id="section-62">Методы конвертации в строку</h4>

      <ul>
        <li><code class="language-plaintext highlighter-rouge">toLocaleString()</code>. Конвертирует весь объект Data в строку без указания часового пояса.</li>
        <li><code class="language-plaintext highlighter-rouge">toLocaleDateString()</code>. Только дата в местном формате без указания ч. пояса.</li>
        <li><code class="language-plaintext highlighter-rouge">toLocaleTimeString()</code>. Только время в местном формате без указания ч. пояса.</li>
        <li><code class="language-plaintext highlighter-rouge">toString()</code>. Конвертирует весь объект Data. JS использует этот метод автоматически при любой операции с экземпляром <code class="language-plaintext highlighter-rouge">Date()</code>.</li>
        <li><code class="language-plaintext highlighter-rouge">toUTCString()</code>. То же самое по Гринвичу.</li>
        <li><code class="language-plaintext highlighter-rouge">toDateString()</code>. Конвертирует только дату.</li>
        <li><code class="language-plaintext highlighter-rouge">toTimeString()</code>. Конвертирует только время.</li>
        <li><code class="language-plaintext highlighter-rouge">toISOString()</code>. Строка в ISO стандарте.</li>
        <li><code class="language-plaintext highlighter-rouge">toJSON()</code>. Строка в формате JSON, который, на самом деле идентичен предыдущему, ISO-формату. Оба метода вернут что-то типа этого: 2019-02-08T09:50:41.294Z.</li>
      </ul>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">d</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">();</span> <span class="c1">// '2019-2-8 10:47:38'</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">toLocaleDateString</span><span class="p">();</span> <span class="c1">// '2019-2-8'</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-built-in-math">
  <summary class="accordion__header">
    Объект `Math`
  </summary>
  <div class="accordion__body">
      <h4 id="section-63">Методы</h4>

      <p>Позволяют производить математические операции над числами. В отличие от других глобальных объектов <code class="language-plaintext highlighter-rouge">Math()</code> не имеет конструктора. То есть нельзя создать его экземпляр.</p>

      <p><strong>Округление.</strong> Меньше 0.5 — в меньшую сторону, больше 0.5 — в большую.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mf">4.7</span><span class="p">);</span> <span class="c1">// 5</span>
<span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mf">4.4</span><span class="p">);</span> <span class="c1">// 4</span>
</code></pre></div>      </div>

      <p><strong>Округление в меньшую сторону</strong> вне зависимости от цифр после запятой.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="mf">4.7</span><span class="p">);</span> <span class="c1">// 4</span>
</code></pre></div>      </div>

      <p>Практически то же самое. <strong>Получить целую часть числа</strong>, удалив всех дробные знаки</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">trunc</span><span class="p">(</span><span class="mf">4.7</span><span class="p">);</span> <span class="c1">// 4</span>
</code></pre></div>      </div>

      <p><strong>Округление в большую сторону.</strong></p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="mf">4.4</span><span class="p">);</span> <span class="c1">// 5</span>
</code></pre></div>      </div>

      <p><strong>Выбор максимального числа</strong> из двух или более аргументов</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">200</span><span class="p">);</span> <span class="c1">// 150</span>
</code></pre></div>      </div>

      <p><strong>Выбор минимального числа</strong> из двух или более аргументов</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">200</span><span class="p">);</span> <span class="c1">// -200</span>
</code></pre></div>      </div>

      <p><strong>√</strong> Квадратный корень</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mi">64</span><span class="p">);</span> <span class="c1">// 8</span>
</code></pre></div>      </div>

      <p><strong>Двоичный логарифм</strong> — по основанию 2</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log2</span><span class="p">(</span><span class="mi">64</span><span class="p">));</span> <span class="c1">// 6 (2^6 = 64)</span>
</code></pre></div>      </div>

      <p><strong>Десятичный логарифм</strong> — по основанию 10</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log10</span><span class="p">(</span><span class="mi">100000</span><span class="p">));</span> <span class="c1">// 5 (10^5 = 100000)</span>
</code></pre></div>      </div>

      <p>Перевод в <strong>абсолютное</strong> — т.е. положительное — число</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="o">-</span><span class="mf">4.7</span><span class="p">);</span> <span class="c1">// 4.7</span>
</code></pre></div>      </div>

      <p><strong>Синус</strong> угла</p>

      <p>☝️🧐 Методы получения синуса, косинуса, тангенса принимают аргументы в радианах. Чтобы использовать значение угла в градусах, надо в аргументе перевести его, умножив на π/180.</p>

      <p>В примере вычисляется синус прямого угла.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="mi">90</span> <span class="o">*</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">));</span> <span class="c1">// 1</span>
</code></pre></div>      </div>

      <p><strong>Косинус</strong> угла</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// myNum === 0.7071067811865476</span>
<span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="mi">45</span> <span class="o">*</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">));</span>
</code></pre></div>      </div>

      <p><strong>Тангенс</strong> угла</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// myNum === 1.7320508075688767</span>
<span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">tan</span><span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">));</span>
</code></pre></div>      </div>

      <p><strong>Произведение в степень</strong>. Первый параметр — возводимое число, второй — степень.
⛔️ Вместо этого метода рекомендуется использовать оператор <code class="language-plaintext highlighter-rouge">**</code>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// 64 👎</span>
<span class="nx">myNum</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">**</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// 64 👍</span>
</code></pre></div>      </div>

      <h4 id="section-64">Константы</h4>

      <p>Объект Math содержит несколько математических констант: логарифмы, число <code class="language-plaintext highlighter-rouge">е</code>. А для повседневной практики может пригодится число <code class="language-plaintext highlighter-rouge">π</code>.</p>

      <p>🧐☝️ Логарифм — это показатель степени, в которую надо возвести основание <code class="language-plaintext highlighter-rouge">a</code>, чтобы получить число <code class="language-plaintext highlighter-rouge">b</code>. Записывается, как <code class="language-plaintext highlighter-rouge">log</code><sub>a</sub> <code class="language-plaintext highlighter-rouge">b</code>. Произносится, как «логарифм b по основанию a».</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span> <span class="c1">// 3.141592653589793</span>
</code></pre></div>      </div>

      <h4 id="section-65">Константы для узкоспециализированных задач</h4>

      <p><strong>Квадратный корень из 2</strong> — √2</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">SQRT2</span><span class="p">;</span> <span class="c1">// 1.4142135623730951</span>
</code></pre></div>      </div>

      <p><strong>Квадратный корень из ½</strong> — √½</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">SQRT1_2</span><span class="p">;</span> <span class="c1">// 0.7071067811865476</span>
</code></pre></div>      </div>

      <p><strong><a href="https://ru.wikipedia.org/wiki/E_(число)">Число <code class="language-plaintext highlighter-rouge">e</code></a></strong> — основание натурального логарифма, иррациональное и трансцендентное число, приблизительно равное 2,71828. Иногда e называют числом Эйлера.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">E</span><span class="p">;</span> <span class="c1">// 2.718281828459045</span>
</code></pre></div>      </div>

      <p>Натуральный <strong>логарифм двух</strong>. (Натуральный логарифм — это логарифм по основанию числа <code class="language-plaintext highlighter-rouge">e</code>).</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LN2</span><span class="p">;</span> <span class="c1">// 0.6931471805599453</span>
</code></pre></div>      </div>

      <p>Натуральный логарифм <strong>десяти</strong></p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LN10</span><span class="p">;</span> <span class="c1">// 2.302585092994046</span>
</code></pre></div>      </div>

      <p><strong>Двоичный логарифм</strong> из <code class="language-plaintext highlighter-rouge">e</code></p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LOG2E</span><span class="p">;</span> <span class="c1">// 1.4426950408889634</span>
</code></pre></div>      </div>

      <p><strong>Десятичный логарифм</strong> из <code class="language-plaintext highlighter-rouge">e</code></p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LOG10E</span><span class="p">;</span> <span class="c1">// 0.4342944819032518</span>
</code></pre></div>      </div>

      <h4 id="section-66">Методы для узкоспециализированных задач</h4>

      <p><strong>Кубический корень</strong> числа</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cbrt</span><span class="p">(</span><span class="mi">125</span><span class="p">);</span> <span class="c1">// 5</span>
</code></pre></div>      </div>

      <p><strong>Натуральный (по основанию e) логарифм</strong> числа</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// То же, что и Math.LN2 - 0.6931471805599453</span>
<span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</code></pre></div>      </div>

      <p><strong>Гиперболический синус</strong> числа</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sinh</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// 10.017874927409903</span>
</code></pre></div>      </div>

      <p><strong>Гиперболический косинус</strong> числа</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cosh</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// 10.067661995777765</span>
</code></pre></div>      </div>

      <p><strong>Гиперболический тангенс</strong> числа</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">tanh</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// 0.7615941559557649</span>
</code></pre></div>      </div>

      <p><strong>Арксинус</strong> в радианах</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span> <span class="c1">// 0.5235987755982989</span>
</code></pre></div>      </div>

      <p><strong>Гиперболический арксинус</strong> числа</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asinh</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// 0.881373587019543</span>
</code></pre></div>      </div>

      <p><strong>Арккосинус</strong> в радианах</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">acos</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span> <span class="c1">// 1.0471975511965979</span>
</code></pre></div>      </div>

      <p><strong>Гиперболический арккосинус</strong> числа</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">acosh</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// 1.3169578969248166</span>
</code></pre></div>      </div>

      <p><strong>Арктангенс числа</strong> в радианах</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// 1.1071487177940904</span>
</code></pre></div>      </div>

      <p><strong>Арктангенс от частного</strong> аргументов</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="c1">// 1.1071487177940904</span>
</code></pre></div>      </div>

      <p><strong>Гиперболический арктангенс</strong> числа</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atanh</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span> <span class="c1">// 0.5493061443340548</span>
</code></pre></div>      </div>

      <p><strong>Степень числа Эйлера</strong>. Степень передается, как аргумент.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// 2.718281828459045</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-built-in-math-random">
  <summary class="accordion__header">
    Метод `Math.random()` и простой генератор случайных чисел
  </summary>
  <div class="accordion__body">
      <p>Генерирует дробные числа от 0 (включительно) до 1 (исключительно).</p>

      <hr />

      <p>Случайное число от 0 до 0.999999999999999</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
</code></pre></div>      </div>

      <p>Случайное число от 0 до 9.999999999999999 (до 10 исключительно)</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>      </div>

      <p><strong>Чтобы случайным образом получать целые цифры</strong>, надо умножать на целый множитель (по желаемому максимуму плюс один) и затем округлять в меньшую сторону. В примере выражение генерирует случайное целое число от 0 до 9.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>А чтобы исключить 0 из возможных результатов, надо к результату <code class="language-plaintext highlighter-rouge">random</code> и <code class="language-plaintext highlighter-rouge">floor</code> добавлять единицу.</p>

      <p>В примере выражение генерирует случайное целое число от 1 до 10.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>


<span class="cm">/**
 * Функция для получения случайного числа
 * в указанном диапазоне
 * @param {Number} min
 * @param {Number} max - Максимально возможное число
 */</span>
<span class="kd">function</span> <span class="nx">getRandomInteger</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span>
<span class="err">    </span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">((</span><span class="nx">max</span> <span class="o">-</span> <span class="nx">min</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
<span class="err">  </span><span class="p">)</span> <span class="o">+</span> <span class="nx">min</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>⛔️ Math.random() не выдает криптографически стойкие случайные числа. Поэтому непригоден ни для чего, требующего безопасности данных. Вместо него следует использовать <a href="https://developer.mozilla.org/ru/docs/Web/API/Crypto">Web Crypto API</a> (API криптографии в вебе), метод <code class="language-plaintext highlighter-rouge">RandomSource.getRandomValues()</code>.</p>

      <h4 id="mathrandom---"><code class="language-plaintext highlighter-rouge">Math.random</code> и длина массива</h4>

      <p>Так как</p>

      <ul>
        <li>индекс массива начинается с нуля,</li>
        <li>и индекс последнего элемента поэтому на единицу меньше длины массива</li>
        <li>а единица в результат возвращаемый <code class="language-plaintext highlighter-rouge">Math.random</code> не входит</li>
      </ul>

      <p>для генерации случайного индекса массива достаточно конструкции</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">words</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">words</span> <span class="o">=</span> <span class="p">[</span>
<span class="err">  </span><span class="dl">'</span><span class="s1">24/7</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">multi-tier</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="dl">'</span><span class="s1">30,000 foot</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">B-to-B</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">win-win</span><span class="dl">'</span><span class="p">,</span>
<span class="p">];</span>
<span class="kd">const</span> <span class="nx">rand</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span>
<span class="err">  </span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">words</span><span class="p">.</span><span class="nx">length</span>
<span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-built-in-nan-isnan">
  <summary class="accordion__header">
    `NaN` / `isNaN()`, `isFinite()`
  </summary>
  <div class="accordion__body">
      <p>Если математическая операция не может быть совершена, то возвращается специальное значение <code class="language-plaintext highlighter-rouge">NaN</code> (Not-A-Number). <code class="language-plaintext highlighter-rouge">NaN</code> используется для обозначения математической ошибки.</p>

      <p>Например, деление <code class="language-plaintext highlighter-rouge">0/0</code> в математическом смысле не определено, поэтому его результат <code class="language-plaintext highlighter-rouge">NaN</code>. Тоже самое получится, если попробовать умножить строку на число.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">alert</span><span class="p">(</span><span class="mi">0</span> <span class="o">/</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// NaN</span>
<span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">food</span><span class="dl">'</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span> <span class="c1">// NaN</span>
</code></pre></div>      </div>

      <p>Значение NaN – единственное в своем роде, которое не равно ничему, включая себя. Следующий код ничего не выведет — оба вызова не сработают.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="kc">NaN</span> <span class="o">==</span> <span class="kc">NaN</span><span class="p">)</span> <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">==</span><span class="dl">'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="kc">NaN</span> <span class="o">===</span> <span class="kc">NaN</span><span class="p">)</span> <span class="nx">alert</span><span class="p">(</span> <span class="dl">'</span><span class="s1">===</span><span class="dl">'</span> <span class="p">);</span>
</code></pre></div>      </div>

      <p>⛔️ Так как значение <code class="language-plaintext highlighter-rouge">NaN</code> не равно ничему, даже самому себе, любые проверки равенства с <code class="language-plaintext highlighter-rouge">NaN</code> исключаются…</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">myNum</span> <span class="o">===</span> <span class="kc">NaN</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// так делать не надо</span>
<span class="err">  </span><span class="nx">myNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>Вместо этого используют специальную функцию isNaN.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// true — 0 / 0 равно NaN</span>
<span class="nx">alert</span><span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="mi">0</span> <span class="o">/</span> <span class="mi">0</span><span class="p">));</span>

<span class="c1">// false — 12 это число</span>
<span class="nx">alert</span><span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="dl">'</span><span class="s1">12</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div>      </div>

      <p>☝️🧐 <strong>Рекомендации Airbnb</strong>. Использовать <code class="language-plaintext highlighter-rouge">Number.isNaN</code> вместо глобального <code class="language-plaintext highlighter-rouge">isNaN</code>. eslint: no-restricted-globals</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ⛔️ плохо</span>
<span class="nb">isNaN</span><span class="p">(</span><span class="dl">'</span><span class="s1">1.2</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nb">isNaN</span><span class="p">(</span><span class="dl">'</span><span class="s1">1.2.3</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// true</span>

<span class="c1">// 👍 хорошо</span>
<span class="nb">Number</span><span class="p">.</span><span class="nb">isNaN</span><span class="p">(</span><span class="dl">'</span><span class="s1">1.2.3</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nb">Number</span><span class="p">.</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="dl">'</span><span class="s1">1.2.3</span><span class="dl">'</span><span class="p">));</span> <span class="c1">// true</span>
</code></pre></div>      </div>

      <h2 id="isfinite-1"><code class="language-plaintext highlighter-rouge">isFinite()</code></h2>

      <p>Глобальная, не связанная не с одним объектом функция <code class="language-plaintext highlighter-rouge">isFinite()</code>, а также аналогичный метод объекта <code class="language-plaintext highlighter-rouge">Number</code>, определяет: является ли переданное значение конечным числом. То есть числом, и не бесконечным, как, например 3.14…</p>

      <p>☝️🧐 <strong>Рекомендации Airbnb</strong>. Использовать <code class="language-plaintext highlighter-rouge">Number.isFinite</code> вместо глобального <code class="language-plaintext highlighter-rouge">isFinite</code>. eslint: no-restricted-globals</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ⛔️ плохо</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="dl">'</span><span class="s1">2e3</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="kc">Infinity</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// true</span>

<span class="c1">// true, но было бы false если использовать более</span>
<span class="c1">// надежную проверку Number.isFinite</span>
<span class="nb">isFinite</span><span class="p">(</span><span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// 👍 хорошо</span>
<span class="nb">Number</span><span class="p">.</span><span class="nb">isFinite</span><span class="p">(</span><span class="dl">'</span><span class="s1">2e3</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nb">Number</span><span class="p">.</span><span class="nb">isFinite</span><span class="p">(</span><span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// false</span>
</code></pre></div>      </div>
    </div>
</details>
</section>

<section>
  <h2>Классы</h2><details class="accordion" id="topic-classes">
  <summary class="accordion__header">
    Общие сведения
  </summary>
  <div class="accordion__body">
      <p>Класс — это шаблон для однотипных объектов, «экземпляров класса». Особый тип функции, для запуска которого вместо ключевого слова <code class="language-plaintext highlighter-rouge">function</code> используется ключевое слово <code class="language-plaintext highlighter-rouge">class</code>.</p>

      <p>Содержит метод <code class="language-plaintext highlighter-rouge">constructor</code>, в котором создаются заготовки свойств, которые затем наследуются экземплярами.</p>

      <p>Также может другие методы — функции для взаимодействия с внешним кодом.</p>

      <p>Наследуемые свойства и методы всегда можно переопределить в экземпляре. Кроме того, можно добавить уникальные.</p>

      <p>В объектно-ориентированной программе каждый объект является экземпляром одного из классов.</p>

      <p>А сама идея классов пришла из работ по базам знаний. Используемые человеком классификации в зоологии, ботанике, химии несут в себе основную идею, что любую вещь всегда можно представить частным случаем некоторого более общего понятия. Конкретное яблоко, the apple является и яблоком вообще, an apple. А «яблоко вообще» является фруктом.</p>

      <h4 id="section-67">Синтаксис</h4>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">ClassName</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">property1</span> <span class="o">=</span> <span class="nx">param1</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">property2</span> <span class="o">=</span> <span class="nx">param2</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="nx">method1</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="err">  </span><span class="nx">method2</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="err">  </span><span class="nx">method3</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>С наследованием от другого класса.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">ClassName</span> <span class="kd">extends</span> <span class="nx">Parent</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">super</span><span class="p">();</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">property1</span> <span class="o">=</span> <span class="nx">param1</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">property2</span> <span class="o">=</span> <span class="nx">param2</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="err">  </span><span class="nx">method1</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="err">  </span><span class="nx">method2</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="err">  </span><span class="nx">method3</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="section-68">Пример</h4>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Имя класса начинается в прописной буквы.
 * Кстати, Google рекомендует комментировать классы
 * и их методы в формате
 * {@link https://bit.ly/3VmBtGa JSDoc}.
 */</span>
<span class="kd">class</span> <span class="nx">User</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="cm">/* Ключевое слово this в конструкторе ссылается
    на создаваемый новый объект.
    Название параметров конструктора и свойств
    класса не обязаны совпадать, но часто
    совпадают — это удобное соглашение.
    Конструктор ничего не возвращает */</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="cm">/**
   * Класс состоит из методов. constructor — метод
   * для заготовки свойств, sayHi() - метод для
   * примера.
   */</span>
<span class="err">  </span><span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="c1">// Запятые между членами класса не нужны.</span>

<span class="err">  </span><span class="nx">sayBye</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">`Bye, </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>Класс — это «синтаксический сахар». То есть конструкция, облегчающая кодирование, но не создающая новых структур данных или понятий.</p>

      <p>Класс создали, как удобную замену <a href="/js/advanced-theory.html#topic-classes-deprecated-constructor-function">самодельным классам</a>, которые программисты создавали с помощью свойства <code class="language-plaintext highlighter-rouge">prototype</code>.</p>

      <h4 id="section-69">Экземпляр класса</h4>

      <p>Для создания экземпляра используется оператор <code class="language-plaintext highlighter-rouge">new</code>, за которым следует имея класса. Значения свойств передаются в параметры. По-программистски можно назвать команду «вызовом конструктора».</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// user — экземпляр класса User</span>
<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="dl">'</span><span class="s1">Вася</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">();</span> <span class="c1">// Метод вернёт строку 'Вася'</span>

<span class="c1">// myCar — экземпляр класса Car</span>
<span class="kd">const</span> <span class="nx">myCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span><span class="dl">'</span><span class="s1">Audi</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myCar</span><span class="p">.</span><span class="nx">present</span><span class="p">());</span> <span class="c1">// I have an Audi</span>
</code></pre></div>      </div>

      <h4 id="section-70">Не стоит создавать класс ради одного экземпляра</h4>

      <p>Классы применяются, когда надо создать множество однотипных объектов. Но <strong>когда объект нужен один, предпочтительнее создавать объект</strong> (объектный литерал). Кроме того, объектные литералы используются для передачи конструкторам параметров — когда параметров больше трех, легко спутать их порядок.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">newCar</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">make</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GM</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">model</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Cadillac</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">year</span><span class="p">:</span> <span class="mi">1955</span><span class="p">,</span>
<span class="err">  </span><span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tan</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">passengers</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<span class="err">  </span><span class="na">convertible</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="err">  </span><span class="na">mileage</span><span class="p">:</span> <span class="mi">12892</span><span class="p">,</span>
<span class="p">};</span>

</code></pre></div>      </div>

      <h4 id="class-expression">Строчные классы — классы определенные в Class Expression</h4>

      <p>Классы можно записать, как функциональное выражение, — присвоив переменной. Это называется Class Expression (выражение класса).</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">User</span> <span class="o">=</span> <span class="kd">class</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p>Строчному классу можно дать имя. Тогда оно, как и в функциональном выражении, будет доступно только внутри класса.</p>

      <p>Наиболее очевидная область применения этой возможности – создание вспомогательного класса прямо при вызове функции.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">SiteGuest</span> <span class="o">=</span> <span class="kd">class</span> <span class="nx">User3</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span> <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">new</span> <span class="nx">SiteGuest</span><span class="p">().</span><span class="nx">sayHi</span><span class="p">();</span> <span class="c1">// Привет</span>
<span class="k">new</span> <span class="nx">User3</span><span class="p">();</span> <span class="c1">// ошибка</span>
</code></pre></div>      </div>

      <h4 id="section-71">Статические методы</h4>

      <p>Статические методы класса описывают внутреннюю логику класса. Статический метод можно вызвать на классе, но <strong>нельзя вызвать на экземпляре класса</strong>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Car</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="kd">static</span> <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="k">return</span> <span class="dl">'</span><span class="s1">Hello!!</span><span class="dl">'</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">myCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span><span class="dl">'</span><span class="s1">Ford</span><span class="dl">'</span><span class="p">);</span>

<span class="cm">/* Мы можем вызвать статический метод на самом
классе */</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">demo</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span>
<span class="err">  </span><span class="o">=</span> <span class="nx">Car</span><span class="p">.</span><span class="nx">hello</span><span class="p">();</span>

<span class="cm">/* ⚠️ Но не можем на экземпляре класса.
Это вызовет ошибку.

document.getElementById("demo").innerHTML
  = myCar.hello();
 */</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-classes-inheritance">
  <summary class="accordion__header">
    Наследование
  </summary>
  <div class="accordion__body">
      <p>Для наследования свойств и методов от другого класса при создании нового используется ключевое слово <code class="language-plaintext highlighter-rouge">extends</code>. В конструктор принимаются наследуемые свойства с помощью метода <code class="language-plaintext highlighter-rouge">super()</code>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">SuperUser</span> <span class="kd">extends</span> <span class="nx">User</span> <span class="p">{</span>
  <span class="cm">/**
   * Новые свойства можно добавлять только после
   * получения наследуемых с помощью `super()`.
   */</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">permissions</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* Здесь вызывается конструктор родительского класса
    с атрибутом параметра `name`, получаемым экземпляром */</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">permissions</span> <span class="o">=</span> <span class="nx">permissions</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="cm">/**
   * Переопределение родительского метода
   */</span>
  <span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span>
    <span class="cm">/**
     * Наследование родительского метода:
     * выполнить все, что написано в родительском
     * методе, а потом выполнять то, что написано
     * ниже
     */</span>
    <span class="k">super</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">();</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Btw, I am super user</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>См. также <a href="/js/advanced-theory.html#topic-classes-prototype-chain">цепочку прототипов</a>.</p>
    </div>
</details>
<details class="accordion" id="topic-classes-hasownproperty-isprototypeof">
  <summary class="accordion__header">
    Наследование — методы `hasOwnProperty`, `isPrototypeOf`
  </summary>
  <div class="accordion__body">
      <p>Используются для проверки различных аспектов наследования. Во избежание ошибок, рекомендуется вызывать эти методы не на экземпляре, а на первом звене цепочки прототипов — <code class="language-plaintext highlighter-rouge">Object.prototype</code> (или <code class="language-plaintext highlighter-rouge">{}.prototype</code>).</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 👎 Так плохо</span>
<span class="kd">const</span> <span class="nx">bad</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// 👍 Так хорошо</span>
<span class="kd">const</span> <span class="nx">good</span> <span class="o">=</span> <span class="p">{}.</span><span class="nx">prototype</span>
<span class="err">  </span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="hasownproperty"><code class="language-plaintext highlighter-rouge">hasOwnProperty</code></h4>

      <p>Метод возвращает логическое значение — есть ли у объекта собственное свойство, не из цепочки прототипов (см. первый пример).</p>

      <h4 id="isprototypeof"><code class="language-plaintext highlighter-rouge">isPrototypeOf()</code></h4>

      <p>Метод проверяет, входит ли объект в цепочку прототипов другого объекта.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Object.prototype можно заменить литералом `{}`</span>
<span class="kd">const</span> <span class="nx">isPrototypeOfBar</span> <span class="o">=</span> <span class="p">{}.</span><span class="nx">isPrototypeOf</span>
<span class="err">  </span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="propertyisenumerable"><code class="language-plaintext highlighter-rouge">propertyIsEnumerable()</code></h4>

      <p>Метод возвращает логическое значение — является ли указанное свойство перечисляемым?</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">barIsEnumerable</span> <span class="o">=</span> <span class="p">{}.</span><span class="nx">propertyIsEnumerable</span>
<span class="err">  </span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-classes-instanceof">
  <summary class="accordion__header">
    Наследование — `instanceof`
  </summary>
  <div class="accordion__body">
      <p>Оператор позволяет установить, принадлежит ли объект к определённому классу.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Класс</span>
<span class="kd">class</span> <span class="nx">Rabbit</span> <span class="kd">extends</span> <span class="nx">Animal</span> <span class="p">{</span> <span class="cm">/* super etc */</span> <span class="p">}</span>

<span class="c1">// создаём объект</span>
<span class="kd">const</span> <span class="nx">rabbit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rabbit</span><span class="p">();</span>

<span class="c1">// проверяем этот объект создан Rabbit?</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">rabbit</span> <span class="k">instanceof</span> <span class="nx">Rabbit</span><span class="p">);</span> <span class="c1">// true, верно</span>
</code></pre></div>      </div>

      <p><strong>Ещё примеры</strong>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Является ли объект cadi экземпляром класса Car?</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">cadi</span> <span class="k">instanceof</span> <span class="nx">Car</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Congrats, it</span><span class="se">\'</span><span class="s1">s a Car!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Проверка нескольких объектов</span>
<span class="k">if</span> <span class="p">((</span><span class="nx">fido</span> <span class="k">instanceof</span> <span class="nx">Dog</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">spot</span> <span class="k">instanceof</span> <span class="nx">Dog</span><span class="p">))</span> <span class="p">{</span>
<span class="err">  </span><span class="c1">// do smth</span>
<span class="p">}</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-classes-add-remove-method-property">
  <summary class="accordion__header">
    Добавление или удаление свойств и методов класса, `prototype`
  </summary>
  <div class="accordion__body">
      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Dog</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">breed</span><span class="p">,</span> <span class="nx">weight</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">breed</span> <span class="o">=</span> <span class="nx">breed</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">weight</span> <span class="o">=</span> <span class="nx">weight</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="nx">goodBoyReaction</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> wags its tail`</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>Чтобы добавить метод классу используется свойство <code class="language-plaintext highlighter-rouge">prototype</code>, прототип объекта. Это набор всех наследуемых свойств и методов класса. В примере с помощью свойства <code class="language-plaintext highlighter-rouge">prototype</code> классу <code class="language-plaintext highlighter-rouge">Dog</code> был добавлен новый метод <code class="language-plaintext highlighter-rouge">bark</code>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Dog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bark</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Woof! Woof!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p>☝️🧐 <strong>Если класс наследует</strong> свойства и методы предка из библиотеки (например, jQuery), тогда prototype использовать <strong>необходимо</strong> — чтобы при каждом обновлении библиотеки не менять класс.</p>
    </div>
</details>
<details class="accordion" id="topic-classes-getters-and-setters">
  <summary class="accordion__header">
    Аксессоры — «геттеры» и «сеттеры» — класса
  </summary>
  <div class="accordion__body">
      <p>Геттеры и сеттеры класса выполняют те же роли, что и <a href="/js/advanced-theory.html#topic-objects-getters-setters">в объектах вообще</a>.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Employee</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">doWork</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> is working`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">get</span> <span class="nx">name</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kd">set</span> <span class="nx">name</span><span class="p">(</span><span class="nx">newName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">newName</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">newName</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">employee1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Employee</span><span class="p">(</span><span class="dl">'</span><span class="s1">John Doe</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>Для доступа к свойству <code class="language-plaintext highlighter-rouge">name</code> используется «геттер».</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">employee1</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</code></pre></div>      </div>

      <p>Для смены значения свойства экземпляра используется «сеттер».</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">employee1</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Jane Doe</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div>      </div>
    </div>
</details>
<details class="accordion" id="topic-classes-public-private-fields">
  <summary class="accordion__header">
    Приватные и публичные поля классов, инкапсуляция
  </summary>
  <div class="accordion__body">
      <p>Один из важнейших принципов объектно-ориентированного программирования – разделение свойств и методов на 2 группы.</p>

      <h4 id="section-72">Внутренний и внешний интерфейсы</h4>

      <p>В JavaScript есть два типа полей (свойств и методов) объекта:</p>

      <ul>
        <li><strong>Приватные</strong>: доступны только внутри класса. Они относятся к <strong>внутреннему интерфейсу</strong>. В материальном мире им аналогична сложная начинка бытовых приборов, скрытая под защитным кожухом.</li>
        <li><strong>Публичные</strong>: доступны отовсюду. Они составляют <strong>внешний интерфейс</strong>. В материальном мире им соответствуют кнопки включения и бегунки регулировки.</li>
      </ul>

      <p>Во многих других языках также существуют <strong>защищённые</strong> поля. Они доступны внутри класса, как приватные. Но кроме того, доступны и в наследуемых классах.</p>

      <p>В JS таких пока нет. Зато приватные поля официально добавлены в JavaScript в спецификации ECMAScript 2022 и поддерживаются <a href="https://caniuse.com/mdn-javascript_classes_private_class_fields">97% браузеров</a>.</p>

      <h4 id="section-73">Приватные поля</h4>

      <p>Названия приватных полей — свойств и методов — начинаются со знака решетки. И отдают ошибку при попытки обращения к ним из-за пределов класса.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Human</span> <span class="p">{</span>
  <span class="err">#</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">;</span>

  <span class="nx">setName</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">human</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Human</span><span class="p">()</span>
<span class="nx">human</span><span class="p">.</span><span class="err">#</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Amy</span><span class="dl">'</span>  <span class="c1">// ОШИБКА!</span>
<span class="nx">human</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="dl">'</span><span class="s1">Amy</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// ОК</span>

<span class="o">-</span> <span class="p">[</span><span class="nx">Приватные</span> <span class="nx">поля</span> <span class="nx">класса</span><span class="p">](</span><span class="nx">https</span><span class="p">:</span><span class="c1">//developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Classes/Private_class_fields)</span>
<span class="o">-</span> <span class="p">[</span><span class="nx">Working</span> <span class="kd">with</span> <span class="kr">private</span> <span class="kd">class</span> <span class="nx">features</span><span class="p">](</span><span class="nx">https</span><span class="p">:</span><span class="c1">//developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_With_Private_Class_Features)</span>
<span class="o">-</span> <span class="p">[</span><span class="mi">8</span> <span class="k">new</span> <span class="nx">JavaScript</span> <span class="nx">features</span> <span class="nx">to</span> <span class="nx">start</span> <span class="nx">using</span> <span class="nx">today</span><span class="p">](</span><span class="nx">https</span><span class="p">:</span><span class="c1">//www.infoworld.com/article/3665748/8-new-javascript-features-to-start-using-today.html)</span>

<span class="err">####</span> <span class="nx">Итог</span>

<span class="nx">В</span> <span class="nx">терминах</span> <span class="nx">ООП</span> <span class="nx">отделение</span> <span class="nx">внутреннего</span> <span class="nx">интерфейса</span> <span class="nx">от</span> <span class="nx">внешнего</span> <span class="nx">называется</span> <span class="p">[</span><span class="nx">инкапсуляция</span><span class="p">](</span><span class="nx">https</span><span class="p">:</span><span class="c1">//ru.wikipedia.org/wiki/Инкапсуляция_(программирование)){:target="_blank"}.</span>

<span class="nx">Это</span> <span class="nx">даёт</span> <span class="nx">следующие</span> <span class="nx">выгоды</span><span class="p">:</span>

<span class="o">-</span> <span class="nx">Защита</span> <span class="nx">для</span> <span class="nx">пользователей</span><span class="p">,</span> <span class="nx">чтобы</span> <span class="nx">они</span> <span class="nx">не</span> <span class="nx">выстрелили</span> <span class="nx">себе</span> <span class="nx">в</span> <span class="nx">ногу</span><span class="p">.</span> <span class="nx">Если</span> <span class="nx">пользователь</span> <span class="nx">класса</span> <span class="nx">изменит</span> <span class="nx">вещи</span><span class="p">,</span> <span class="nx">не</span> <span class="nx">предназначенные</span> <span class="nx">для</span> <span class="nx">изменения</span> <span class="nx">извне</span> <span class="err">–</span> <span class="nx">последствия</span> <span class="nx">непредсказуемы</span><span class="p">.</span>

<span class="o">-</span> <span class="nx">Поддерживаемость</span><span class="p">.</span> <span class="nx">Приватные</span> <span class="nx">методы</span> <span class="nx">можно</span> <span class="nx">безопасно</span> <span class="nx">переименовывать</span><span class="p">,</span> <span class="nx">их</span> <span class="nx">параметры</span> <span class="nx">можно</span> <span class="nx">изменять</span> <span class="nx">и</span> <span class="nx">даже</span> <span class="nx">удалять</span><span class="p">,</span> <span class="nx">потому</span> <span class="nx">что</span> <span class="nx">от</span> <span class="nx">них</span> <span class="nx">не</span> <span class="nx">зависит</span> <span class="nx">внешний</span> <span class="nx">код</span><span class="p">.</span> <span class="nx">В</span> <span class="nx">новой</span> <span class="nx">версии</span> <span class="nx">вы</span> <span class="nx">можете</span> <span class="nx">полностью</span> <span class="nx">всё</span> <span class="nx">переписать</span><span class="p">,</span> <span class="nx">но</span> <span class="nx">пользователю</span> <span class="nx">будет</span> <span class="nx">легко</span> <span class="nx">обновиться</span><span class="p">,</span> <span class="nx">если</span> <span class="nx">внешний</span> <span class="nx">интерфейс</span> <span class="nx">остался</span> <span class="nx">такой</span> <span class="nx">же</span><span class="p">.</span>

<span class="o">-</span> <span class="nx">Сокрытие</span> <span class="nx">сложности</span><span class="p">.</span> <span class="nx">Люди</span> <span class="nx">обожают</span> <span class="nx">использовать</span> <span class="nx">простые</span> <span class="nx">вещи</span><span class="p">.</span> <span class="nx">По</span> <span class="nx">крайней</span> <span class="nx">мере</span><span class="p">,</span> <span class="nx">снаружи</span><span class="p">.</span> <span class="nx">Что</span> <span class="nx">внутри</span> <span class="err">–</span> <span class="nx">это</span> <span class="nx">другое</span> <span class="nx">дело</span><span class="p">.</span> <span class="nx">Для</span> <span class="nx">сокрытия</span> <span class="nx">внутреннего</span> <span class="nx">интерфейса</span> <span class="nx">мы</span> <span class="nx">используем</span> <span class="nx">защищённые</span> <span class="nx">или</span> <span class="nx">приватные</span> <span class="nx">свойства</span><span class="p">:</span>

<span class="o">-</span> <span class="nx">Защищённые</span> <span class="nx">поля</span> <span class="nx">имеют</span> <span class="nx">префикс</span> <span class="s2">`_`</span><span class="p">.</span> <span class="nx">Это</span> <span class="nx">хорошо</span> <span class="nx">известное</span> <span class="nx">соглашение</span><span class="p">,</span> <span class="nx">не</span> <span class="nx">поддерживаемое</span> <span class="nx">на</span> <span class="nx">уровне</span> <span class="nx">языка</span><span class="p">.</span> <span class="nx">Программисты</span> <span class="nx">должны</span> <span class="nx">обращаться</span> <span class="nx">к</span> <span class="nx">полю</span><span class="p">,</span> <span class="nx">начинающемуся</span> <span class="nx">с</span> <span class="s2">`_`</span><span class="p">,</span> <span class="nx">только</span> <span class="nx">из</span> <span class="nx">его</span> <span class="nx">класса</span> <span class="nx">и</span> <span class="nx">классов</span><span class="p">,</span> <span class="nx">унаследованных</span> <span class="nx">от</span> <span class="nx">него</span><span class="p">.</span>

<span class="o">-</span> <span class="nx">Приватные</span> <span class="nx">поля</span> <span class="nx">имеют</span> <span class="nx">префикс</span> <span class="s2">`#`</span><span class="p">.</span> <span class="nx">JavaScript</span> <span class="nx">гарантирует</span><span class="p">,</span> <span class="nx">что</span> <span class="nx">мы</span> <span class="nx">можем</span> <span class="nx">получить</span> <span class="nx">доступ</span> <span class="nx">к</span> <span class="nx">таким</span> <span class="nx">полям</span> <span class="nx">только</span> <span class="nx">внутри</span> <span class="nx">класса</span><span class="p">.</span>
<span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/details</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">details</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">accordion</span><span class="dl">"</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">topic-classes-new-instance</span><span class="dl">"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">summary</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">accordion__header</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="nx">Создание</span> <span class="nx">нового</span> <span class="nx">объекта</span><span class="p">,</span> <span class="nx">экземпляра</span> <span class="nx">класса</span><span class="p">.</span> <span class="nx">Доступ</span> <span class="nx">к</span> <span class="nx">его</span> <span class="nx">свойствам</span> <span class="nx">и</span> <span class="nx">методам</span>
  <span class="o">&lt;</span><span class="sr">/summary</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">div</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">accordion__body</span><span class="dl">"</span> <span class="nx">markdown</span><span class="o">=</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="o">&gt;</span><span class="s2">```javascript
const objectName = new ClassName(arg1, arg2, etc);
</span></code></pre></div>      </div>

      <p>Пример.</p>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
<span class="err">  </span><span class="cm">/**
   * @param {string} firstName
   * @param {string} lastName
   * @param {number} age
   */</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">lastName</span><span class="p">;</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Создаем новые объекты класса Person</span>
<span class="kd">const</span> <span class="nx">john</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Smith</span><span class="dl">'</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">susan</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">Susan</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Jordan</span><span class="dl">'</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>
</code></pre></div>      </div>

      <h4 id="section-74">Создание массива объектов с использованием класса</h4>

      <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">family</span> <span class="o">=</span> <span class="p">[</span>
<span class="err">  </span><span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">Alice</span><span class="dl">'</span><span class="p">,</span> <span class="dl">''</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span>
<span class="err">  </span><span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">Bob</span><span class="dl">'</span><span class="p">,</span> <span class="dl">''</span><span class="p">,</span> <span class="mi">42</span><span class="p">),</span>
<span class="err">  </span><span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">Michelle</span><span class="dl">'</span><span class="p">,</span> <span class="dl">''</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
<span class="err">  </span><span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">'</span><span class="s1">Timmy</span><span class="dl">'</span><span class="p">,</span> <span class="dl">''</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">];</span>
</code></pre></div>      </div>

      <p>☝️🧐 При использовании <code class="language-plaintext highlighter-rouge">new</code> с классом создается новый̆ пустой̆ объект. Свойства объекта инициализируются только передачей аргументов.</p>
    </div>
</details>
<details class="accordion" id="topic-classes-stateful-components">
  <summary class="accordion__header">
    Состояние и stateful-компоненты
  </summary>
  <div class="accordion__body">
      <p>Обновлять интерфейс страницы можно, выбирая элемент через <code class="language-plaintext highlighter-rouge">querySelector</code> и пр., добавляя <code class="language-plaintext highlighter-rouge">innerHTML</code>, меняя классы через <code class="language-plaintext highlighter-rouge">classList</code> или строковые стили в свойстве <code class="language-plaintext highlighter-rouge">style</code>.</p>

      <p>Современные фреймворки — React, Vue etc — предлагают управление интерфейсом через состояния. Без выбора элементов по CSS-селекторам и дальнейших манипуляций. Обновляешь состояние и выводишь на экран свежую копию интерфейса на основе новых данных.</p>

      <p><strong>Состояние</strong> — это всего лишь данные (обычно — простой объект) в определенный момент времени. Значения состояний (<code class="language-plaintext highlighter-rouge">states</code>) устанавливаются внутри компонента — по аналогии с переменными, которые объявлены внутри функции.</p>

      <p>Для того, чтобы сохранять состояние UI элементов (один выбран, другой помечен, как важный и т.д.) используются stateful-компоненты (другие названия: компоненты с состояниями, классовые компоненты). Они известны, прежде всего, по фреймворкам, но их можно написать и на «ванильном» JS.</p>

      <p>Простой пример с состоянием, сохраненном в глобальной переменной.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Вот это состояние</span>
<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">greeting</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">there</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// Простой компонент</span>
<span class="kd">const</span> <span class="nx">greeting</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="k">return</span> <span class="s2">`&lt;p&gt;</span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">greeting</span><span class="p">}</span><span class="s2">, </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">!&lt;/p&gt;`</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Выводим на экран</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">greeting</span><span class="p">();</span>
</code></pre></div>      </div>

      <p>Улучшенный вариант. Состояние (данные) стало свойством компонента и доступно только изнутри.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Компонент</span>
<span class="kd">const</span> <span class="nx">greeting</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="err">  </span><span class="k">return</span> <span class="s2">`
    &lt;p&gt;</span><span class="p">${</span><span class="nx">greeting</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">greeting</span><span class="p">}</span><span class="s2">,
    </span><span class="p">${</span><span class="nx">greeting</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">!&lt;/p&gt;
  `</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Состояние</span>
<span class="nx">greeting</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">  </span><span class="na">greeting</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">,</span>
<span class="err">  </span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">there</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// Вывод на экран</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">greeting</span><span class="p">();</span>
</code></pre></div>      </div>

      <p>См. также примеры:</p>

      <ul>
        <li><a href="/js/how-to.html#topic-stateful-counter">Счётчик</a></li>
      </ul>

      <h4 id="section-75">Планирование компонента — вопросы, которые надо себе задавать перед тем, как начать писать код</h4>

      <ul>
        <li>Как мы собираемся в странице выбирать один компонент из множества и не загрязнить глобальное пространство имен?</li>
        <li>Как мы собираемся рендерить HTML для компонента?</li>
        <li>Как мы будем сохранять и контролировать внутреннее состояние компонента?</li>
        <li>Как мы будем удалять компонент и обработчики событий, когда они перестанут быть нужными?</li>
      </ul>

      <h4 id="section-76">Прокси</h4>

      <p>Для отслеживания изменений во фреймворках используются <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank">прокси</a> — объект, который «оборачивается» вокруг другого объекта и может перехватывать (и, при желании, самостоятельно обрабатывать) разные действия с ним — в частности, чтение/запись свойств.</p>

      <p>Эту же технологию использует npm-пакет on-change, который можно использовать в ванильных stateful-компонентах.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">onChange</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">on-change</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">App</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="c1">// Состояние</span>
<span class="err">    </span><span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">      </span><span class="na">currentTodoItemID</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
<span class="err">    </span><span class="p">};</span>

<span class="err">    </span><span class="c1">// Слушатель с помощью пакета 'on-change'</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="cm">/* Изменение компонента в ответ на изменения
  состояния */</span>
<span class="err">  </span><span class="kd">static</span> <span class="nx">update</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">current</span><span class="p">,</span> <span class="nx">previous</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="err">      </span><span class="s2">`</span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2"> changed
      from </span><span class="p">${</span><span class="nx">previous</span><span class="p">}</span><span class="s2"> to </span><span class="p">${</span><span class="nx">current</span><span class="p">}</span><span class="s2">`</span>
<span class="err">    </span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currentTodoItemID</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

</code></pre></div>      </div>

      <p>Можно обойтись и без дополнительных npm-пакетов.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Component</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
<span class="err">    </span><span class="c1">// Состояние</span>
<span class="err">    </span><span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{};</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="nx">setState</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Proxy</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">stateHandler</span><span class="p">);</span>
<span class="err">  </span><span class="p">}</span>

<span class="err">  </span><span class="nx">stateHandler</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="c1">// updates the object state</span>
<span class="err">    </span><span class="nx">target</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
<span class="err">    </span><span class="c1">// triggers the rendering</span>
<span class="err">    </span><span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p><a href="https://learn.javascript.ru/proxy">Ещё о прокси</a>(https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Proxy){:target=”_blank”}</p>
    </div>
</details>
<details class="accordion" id="topic-classes-deprecated-constructor-function">
  <summary class="accordion__header">
    Предки классов — функции-конструкторы
  </summary>
  <div class="accordion__body">
      <p>Раньше в качестве шаблонов пользовательских объектов использовались функции, которые назывались «конструкторами».</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Конструктор объекта</span>
<span class="kd">function</span> <span class="nx">MyConstructor</span><span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">arg1</span><span class="p">;</span>
<span class="err">  </span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">arg2</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Создаем новый экземпляр объекта</span>
<span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyConstructor</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Doe</span><span class="dl">'</span><span class="p">);</span>

<span class="cm">/* Внутри console.log — вызов функции, как метода
экземпляра объекта, созданного с помощью
конструктора. */</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">firstName</span><span class="p">);</span>
</code></pre></div>      </div>

      <p>В современных реализациях языка шаблонами пользовательских объектов служат <a href="/js/advanced-theory.html#topic-classes-overview">классы</a>. И в них используется метод <code class="language-plaintext highlighter-rouge">constructor</code> — определяющий свойства объекта. Методы определяются за скобками <code class="language-plaintext highlighter-rouge">constructor'а</code>.</p>
    </div>
</details>
</section>

<section>
  <h2>Советы и ссылки</h2><details class="accordion" id="topic-performance-tips">
  <summary class="accordion__header">
    14 советов по оптимизации
  </summary>
  <div class="accordion__body">
      <h4 id="section-77">1. Удалить неиспользуемый код и функции</h4>

      <p>Чем больше кода содержится в приложении, тем больше данных необходимо передать клиенту, а браузеру потребуется больше времени для анализа и интерпретации кода.</p>

      <p>Не надо включать в сборку неиспользуемые функции — пусть они хранятся в папках исходниках.</p>

      <p>Неиспользуемый код можно удалить вручную, a также при сборке с UglifyJS или <a href="https://developers.google.com/closure/compiler/docs/api-tutorial3">Google Closure Compiler</a>.</p>

      <p>При сборке webpack’ом применяют  <a href="https://bluepnume.medium.com/javascript-tree-shaking-like-a-pro-7bf96e139eb7">технику «встряхивания дерева»</a>.</p>

      <p>Неиспользуемые пакеты npm, можно удалить командой <code class="language-plaintext highlighter-rouge">npm prune</code>.</p>

      <h4 id="section-78">2. Кешировать</h4>

      <p>Использовать <a href="https://developer.mozilla.org/en-US/docs/Web/API/Cache">Cache API</a> или <a href="https://developer.mozilla.org/ru/docs/Web/HTTP/Caching">HTTP-кэширования</a>.</p>

      <h4 id="section-79">3. Избегайте утечек памяти</h4>

      <p>Будучи языком высокого уровня, JS заботится о нескольких низкоуровневых системах управления, таких как управление памятью. Сборка мусора — это процесс, общий для большинства языков программирования. Сборка мусора с точки зрения непрофессионала — это просто сбор и освобождение памяти, которая была выделена объектам, но которая в настоящее время не используется. В таких языках программирования, как C, разработчик должен позаботиться о распределении и освобождении памяти, используя функции <code class="language-plaintext highlighter-rouge">malloc()</code> и <code class="language-plaintext highlighter-rouge">dealloc()</code>.</p>

      <p>Даже если сборка мусора выполняется в JavaScript автоматически, могут быть определенные случаи, когда она не будет идеальной. В JavaScript ES6 <code class="language-plaintext highlighter-rouge">Map</code> и <code class="language-plaintext highlighter-rouge">Set</code> были представлены со своими «более слабыми» братьями и сестрами. Этот «более слабый» аналог, известный как <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/WeakMap">WeakMap</a> и WeakSet, содержит «слабые» ссылки на объекты. Они позволяют собирать ненужные значения и предотвращать утечки памяти.</p>

      <h4 id="section-80">4. Попытайтесь выходить из циклов раньше</h4>

      <p>Обработка больших циклов может занять много времени. Поэтому следует выходить из них как можно раньше — с помощью ключевого слова <code class="language-plaintext highlighter-rouge">break</code> и ключевого слова <code class="language-plaintext highlighter-rouge">continue</code>.</p>

      <p>В приведенном ниже примере, если вы не вышли из цикла, ваш код будет запускать цикл 1000000000 раз, что явно слишком.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">----</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">arr</span><span class="p">[</span><span class="mi">970</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">found</span><span class="dl">'</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span> <span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">found</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
<span class="err">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Found</span><span class="dl">"</span><span class="p">);</span>
<span class="err">    </span><span class="k">break</span><span class="p">;</span>
<span class="err">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>В приведенном ниже примере, если вы не сделали continue, когда цикл не соответствует условию, вы все равно будете запускать функцию 1000000000 раз. Мы обрабатываем элемент массива только в том случае, если он находится в четном положении. Это уменьшает выполнение цикла почти вдвое.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">----</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">arr</span><span class="p">[</span><span class="mi">970</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">found</span><span class="dl">'</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">%</span><span class="mi">2</span><span class="o">!=</span><span class="mi">0</span><span class="p">){</span>
<span class="err">  </span><span class="k">continue</span><span class="p">;</span>
 <span class="p">};</span>
 <span class="nx">process</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <h4 id="section-81">5. Минимизируйте количество вычислений переменных</h4>

      <p>Чтобы уменьшить количество вычислений переменной, вы можете использовать замыкания. С точки зрения непрофессионала, замыкания в JavaScript предоставляют доступ к области видимости внешней функции из внутренней функции. Замыкания создаются каждый раз, когда вызывается функция created-not. Внутренние функции будут иметь доступ к переменным внешней области видимости, даже после возврата внешней функции.</p>

      <p>Давайте рассмотрим два примера, чтобы увидеть это в действии. Эти примеры взяты из блога Брета.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">findCustomerCity</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">texasCustomers</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Ludwig</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Kate</span><span class="dl">'</span><span class="p">];</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">californiaCustomers</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Wade</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Lucie</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Kylie</span><span class="dl">'</span><span class="p">];</span>

<span class="err">  </span><span class="k">return</span> <span class="nx">texasCustomers</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Texas</span><span class="dl">'</span> <span class="p">:</span>
<span class="err">    </span><span class="nx">californiaCustomers</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">California</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Unknown</span><span class="dl">'</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>      </div>

      <p>Если мы вызываем вышеупомянутые функции несколько раз, каждый раз создается новый объект. Для каждого вызова память излишне перераспределяется на переменные texasCustometrs и californiaCustomers. Используя решение с замыканиями, мы можем создать экземпляр переменных только один раз. Давайте рассмотрим приведенный ниже пример.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">findCustomerCity</span><span class="p">()</span> <span class="p">{</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">texasCustomers</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Ludwig</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Kate</span><span class="dl">'</span><span class="p">];</span>
<span class="err">  </span><span class="kd">const</span> <span class="nx">californiaCustomers</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Wade</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Lucie</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Kylie</span><span class="dl">'</span><span class="p">];</span>

<span class="err">  </span><span class="k">return</span> <span class="nx">name</span> <span class="o">=&gt;</span> <span class="nx">texasCustomers</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Texas</span><span class="dl">'</span> <span class="p">:</span>
 <span class="nx">californiaCustomers</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">California</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Unknown</span><span class="dl">'</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cityOfCustomer</span> <span class="o">=</span> <span class="nx">findCustomerCity</span><span class="p">();</span>
<span class="nx">cityOfCustomer</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">);</span><span class="c1">//Texas</span>
<span class="nx">cityOfCustomer</span><span class="p">(</span><span class="dl">'</span><span class="s1">Wade</span><span class="dl">'</span><span class="p">);</span><span class="c1">//California</span>
<span class="nx">cityOfCustomer</span><span class="p">(</span><span class="dl">'</span><span class="s1">Max</span><span class="dl">'</span><span class="p">);</span><span class="c1">//Unknown</span>
</code></pre></div>      </div>

      <p>В приведенном выше примере с помощью замыканий внутренняя функция, которая возвращается в переменную cityOfCustomer, имеет доступ к константам внешней функции findCustomerCity(). И всякий раз, когда вызывается внутренняя функция с именем, переданным в качестве параметра, ей не нужно снова создавать экземпляры констант.</p>

      <h4 id="dom">6. Минимизируйте доступ к DOM</h4>

      <p>Доступ к DOM медленный по сравнению с другими операторами JavaScript. Если вы внесете изменения в DOM, которые приведут к перерисовке макета, это может привести к замедлению работы.</p>

      <p>Чтобы уменьшить количество раз, когда вы обращаетесь к элементу DOM, обращайтесь к нему один раз и используйте его как локальную переменную. Когда необходимость отпадет, обязательно удалите значение переменной, установив для него null. Это предотвратит утечку памяти, поскольку позволит работать процессу сбора мусора.</p>

      <h4 id="section-82">7. Сожмите файлы</h4>

      <p>Используя такие методы сжатия, как Gzip, вы можете уменьшить размер файлов JavaScript. Эти файлы поменьше приведут к увеличению производительности сайта, так как браузер должен будет загружать меньшие ресурсы. Эти сжатия могут уменьшить размер файла до 80%. Подробнее о сжатии читайте здесь.</p>

      <h4 id="section-83">8. Оптимизируйте собранный код</h4>

      <p>Некоторые люди считают, что минимизация и сжатие – это одно и то же. Вовсе нет – это разные вещи. В сжатии используются специальные алгоритмы для изменения выходного размера файла. При минимизации в JS удаляются комментарии и лишние пробелы, переменные и функции переименовываются: длинные имена заменяются однобуквенными.</p>

      <h4 id="throttling--debouncing">9. Используйте <code class="language-plaintext highlighter-rouge">throttling</code> и <code class="language-plaintext highlighter-rouge">debouncing</code></h4>

      <p>Используя эти два метода, мы можем строго следить за тем, сколько раз событие должно обрабатываться кодом.
При <code class="language-plaintext highlighter-rouge">throttling</code> указывается максимальное количество раз, когда функция может быть вызвана. Например, «выполнять функцию события <code class="language-plaintext highlighter-rouge">onkeyup</code> не чаще, чем раз в 1000 миллисекунд». Это будет означать, что если вы нажмете клавиши 20 раз в секунду, событие будет срабатывать только один раз в секунду. Это уменьшит нагрузку на код.</p>

      <p><a href="/js/advanced-theory.html#topic-dom-window-ready-load-resize">С другой стороны, <code class="language-plaintext highlighter-rouge">debouncing</code></a> — это то, где вы указываете минимальную продолжительность времени для повторного запуска функции с момента предыдущего выполнения той же функции. Другими словами, «выполняйте эту функцию, только если прошло 600 миллисекунд без ее вызова».</p>

      <p>Вы можете реализовать собственные функции <code class="language-plaintext highlighter-rouge">debounce</code> и <code class="language-plaintext highlighter-rouge">throttle</code>. Последний, используется чаще, так как является более универсальным.</p>

      <p>Также можно импортировать готовые функции из библиотеки Lodash (<a href="https://www.sitepoint.com/throttle-scroll-events/">предпочтительный метод</a>). <code class="language-plaintext highlighter-rouge">Импортировать можно при сборке Webpack'ом</code>(https://stackoverflow.com/questions/35250500/correct-way-to-import-lodash), который включает loadash.</p>

      <h4 id="delete">10. Избегайте использования ключевого слова delete</h4>

      <p>Ключевое слово delete используется, чтобы удалить свойство из объекта. В качестве альтернативы, вы можете просто установить нежелательное свойство как <code class="language-plaintext highlighter-rouge">undefined</code>.</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="dl">"</span><span class="s2">Jane Doe</span><span class="dl">"</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span><span class="mi">43</span><span class="p">};</span>
<span class="nx">object</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
</code></pre></div>      </div>

      <p>Вы также можете использовать объект Map, так как его метод <code class="language-plaintext highlighter-rouge">delete</code> работает быстрее.</p>

      <h4 id="section-84">11. Используйте асинхронный код для предотвращения блокировки потоков</h4>

      <p>Вы должны знать, что JavaScript является синхронным по умолчанию, а также однопоточным. Но могут быть случаи, когда коду требуется много времени для вычислений. Будучи синхронным по своей природе, для JavaScript это будет означать, что этот фрагмент кода будет блокировать выполнение других операторов кода до тех пор, пока он не будет выполнен. Это снизит производительность в целом.</p>

      <p>Но мы можем предотвратить эту ситуацию, внедрив асинхронный код. Асинхронный код был ранее написан в форме обратных вызовов, но с ES6 был введен новый стиль обработки асинхронного кода. Этот новый стиль был назван <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Guide/Using_promises">промисами</a>.</p>

      <h4 id="section-85">12.  Используйте разделение кода</h4>

      <p>Если у вас есть опыт работы с Google Lighthouse, вы знакомы с метрикой, которая называется «первое значимое отображение». Это один из шести показателей, отслеживаемых в разделе «Производительность» отчета Light House.
First Contentful Paint (FCP) измеряет, сколько времени браузеру требуется для отображения первого фрагмента содержимого DOM после перехода пользователя на вашу страницу. Изображения, небелые <canvas> элементы и SVG на странице считаются содержимым DOM; ничего внутри iframe не включено.</canvas></p>

      <p>Один из лучших способов получить более высокий балл FCP — использовать разделение кода. Разделение кода — это метод, при котором вы сначала отправляете пользователю только необходимые модули. Это сильно повлияет на оценку FCP, уменьшая размер полезной нагрузки, передаваемой изначально.</p>

      <p>Популярные пакеты модулей, такие как webpack, предоставляют функционал разделения кода. Вы также можете использовать собственные модули ES, чтобы загрузить отдельные модули.</p>

      <h4 id="async--defer">13. Используйте <code class="language-plaintext highlighter-rouge">async</code> и <code class="language-plaintext highlighter-rouge">defer</code></h4>

      <h4 id="web-worker--------">14.  Используйте Web Worker для выполнения интенсивных задач процессора в фоновом режиме</h4>

      <p><a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Workers_API/Using_web_workers">Web Worker</a> позволяют запускать скрипты в фоновых потоках. Если у вас есть очень интенсивные задачи, вы можете назначить их для Web Worker, которые будут выполнять их без вмешательства в пользовательский интерфейс. После создания Web Worker может общаться с кодом JavaScript, отправляя сообщения в обработчик событий, указанный этим кодом. Это может происходить и наоборот.</p>

    </div>
</details>
<details class="accordion">
  <summary class="accordion__header">
    Полезные ссылки
  </summary>
  <div class="accordion__body">
      <ul>
        <li><a href="https://learn.javascript.ru/web-components">Веб-компоненты</a></li>
        <li><strong>Символ</strong> — уникальный и неизменяемый примитивный тип данных, который может быть использован как ключ для свойств объектов. См. в <a href="https://www.w3schools.com/js/js_es6.asp#mark_symbol" target="_blank">W3Schools</a> и «<a href="https://learn.javascript.ru/symbol" target="_blank">современном учебнике</a>».</li>
        <li><a href="https://doka.guide/js/shallow-or-deep-clone/" target="_blank">Поверхностное и глубокое копирование</a></li>
        <li><a href="https://www.stevenchang.tw/blog/2020/05/23/JavaScript-slice-call-function" target="_blank"><code class="language-plaintext highlighter-rouge">Array.prototype.slice</code> \ <code class="language-plaintext highlighter-rouge">\[\].slice.call()</code> — прием для применения методов массива к <code class="language-plaintext highlighter-rouge">NodeList</code></a></li>
        <li><a href="https://developer.mozilla.org/ru/docs/Web/API" target="_blank">Интерфейсы веб API</a>:
          <ul>
            <li>Blob — <a href="https://developer.mozilla.org/ru/docs/Web/API/Blob" target="_blank">1</a>, <a href="https://learn.javascript.ru/blob" target="_blank">2</a>, <a href="https://docs.microsoft.com/en-us/answers/questions/480791/what-is-the-difference-between-storing-documents-i.html#answer-481051" target="_blank">3</a></li>
            <li><a href="https://www.w3schools.com/html/html5_geolocation.asp" target="_blank">Гео</a></li>
            <li><a href="https://www.w3schools.com/html/html5_draganddrop.asp" target="_blank">Drag and drop</a></li>
            <li><a href="https://www.w3schools.com/html/html5_webstorage.asp" target="_blank">Веб хранилище</a></li>
            <li><a href="https://www.w3schools.com/html/html5_webworkers.asp" target="_blank">Web Workers</a></li>
            <li><a href="https://www.w3schools.com/html/html5_serversentevents.asp" target="_blank">Server-sent events</a></li>
            <li><a href="https://developer.mozilla.org/ru/docs/Web/API/Fullscreen_API" target="_blank">Полноэкранный режим, full screen</a></li>
          </ul>
        </li>
        <li><a href="https://developer.mozilla.org/ru/docs/WebAssembly/Concepts">WebAssembly</a> - это технология, предоставляющая новый тип кода, который можно запускать в современных веб-браузерах. Код для WebAssembly не пишется вручную, а компилируется из низкоуровневых исходных языков C, C++, Rust и.т.д.</li>
        <li><a href="https://learn.javascript.ru/call-apply-decorators">Декораторы и переадресация вызова, call/apply</a></li>
      </ul>

      <h4 id="section-86">Справочники</h4>

      <ul>
        <li><a href="https://thisthat.dev/" target="_blank">What is the difference</a></li>
        <li><a href="https://1loc.dev/" target="_blank">Favorite JavaScript Utilities</a></li>
        <li><a href="https://www.canidev.tools/" target="_blank">CanIuse DevTools</a> - раздел JS; надо клинкуть на чекбокс, чтобы открыть инструкции.</li>
      </ul>
    </div>
</details>
</section>

<p>См. также <a href="/">шпаргалку</a> и <a href="/js/how-to.html">практическое руководство</a>.</p>

</main><footer class="footer">
  <p class="footer__copyright">
    © 2022 Владимир Никишин,&nbsp;
    <a href="https://super-mark.ru/" target="_blank" rel="noopener noreferrer">
      SuperMark
    </a>.
  </p>
  <p class="footer__credits-caption">По материалам:</p>
  <ul class="footer__credits"><li><a href="https://htmldom.dev/" target="_blank" rel="noopener noreferrer">HTML DOM</a>.</li></ul>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
<script src="/assets/js/main.js?20221013-0630"></script>

<script>
  hljs.highlightAll();
</script>

  </body>
</html>
